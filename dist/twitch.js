var TwitchJs=function(){"use strict";var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))}function i(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l(t,e){return t(e={exports:{}},e.exports),e.exports}var f=l((function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||t,a),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},s.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},s.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,o,i,a){var s=r?r+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,o),!0;case 5:return l.fn.call(l.context,e,n,o,i),!0;case 6:return l.fn.call(l.context,e,n,o,i,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,y=l.length;for(c=0;c<y;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,o);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},s.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},s.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||o&&!s.once||n&&s.context!==n||a(this,i);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||o&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})),p=(t,e)=>(e=e||(()=>{}),t.then((t=>new Promise((t=>{t(e())})).then((()=>t))),(t=>new Promise((t=>{t(e())})).then((()=>{throw t})))));class y extends Error{constructor(t){super(t),this.name="TimeoutError"}}const h=(t,e,r)=>new Promise(((n,o)=>{if("number"!=typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void n(t);const i=setTimeout((()=>{if("function"==typeof r){try{n(r())}catch(t){o(t)}return}const i=r instanceof Error?r:new y("string"==typeof r?r:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),o(i)}),e);p(t.then(n,o),(()=>{clearTimeout(i)}))}));var d=h,v=h,_=y;d.default=v,d.TimeoutError=_;const E=Symbol.asyncIterator||"@@asyncIterator",m=t=>{const e=t.on||t.addListener||t.addEventListener,r=t.off||t.removeListener||t.removeEventListener;if(!e||!r)throw new TypeError("Emitter is not compatible");return{addListener:e.bind(t),removeListener:r.bind(t)}},O=t=>Array.isArray(t)?t:[t],S=(t,e,r)=>{let n;const o=new Promise(((o,i)=>{if(!((r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r}).count>=0)||r.count!==1/0&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");const a=O(e),s=[],{addListener:u,removeListener:c}=m(t),l=(...t)=>{const e=r.multiArgs?t:t[0];r.filter&&!r.filter(e)||(s.push(e),r.count===s.length&&(n(),o(s)))},f=t=>{n(),i(t)};n=()=>{for(const t of a)c(t,l);for(const t of r.rejectionEvents)c(t,f)};for(const t of a)u(t,l);for(const t of r.rejectionEvents)u(t,f);r.resolveImmediately&&o(s)}));if(o.cancel=n,"number"==typeof r.timeout){const t=d(o,r.timeout);return t.cancel=n,t}return o},g=(t,e,r)=>{"function"==typeof r&&(r={filter:r}),r={...r,count:1,resolveImmediately:!1};const n=S(t,e,r),o=n.then((t=>t[0]));return o.cancel=n.cancel,o};var b=g,A=g,T=S,I=d.TimeoutError;b.default=A,b.multiple=T,b.iterator=(t,e,r)=>{"function"==typeof r&&(r={filter:r});const n=O(e);r={rejectionEvents:["error"],resolutionEvents:[],limit:1/0,multiArgs:!1,...r};const{limit:o}=r;if(!(o>=0&&(o===1/0||Number.isInteger(o))))throw new TypeError("The `limit` option should be a non-negative integer or Infinity");if(0===o)return{[Symbol.asyncIterator](){return this},next:async()=>({done:!0,value:void 0})};const{addListener:i,removeListener:a}=m(t);let s,u=!1,c=!1;const l=[],f=[];let p=0,y=!1;const h=(...t)=>{p++,y=p===o;const e=r.multiArgs?t:t[0];if(l.length>0){const{resolve:t}=l.shift();return t({done:!1,value:e}),void(y&&d())}f.push(e),y&&d()},d=()=>{u=!0;for(const t of n)a(t,h);for(const t of r.rejectionEvents)a(t,v);for(const t of r.resolutionEvents)a(t,_);for(;l.length>0;){const{resolve:t}=l.shift();t({done:!0,value:void 0})}},v=(...t)=>{if(s=r.multiArgs?t:t[0],l.length>0){const{reject:t}=l.shift();t(s)}else c=!0;d()},_=(...t)=>{const e=r.multiArgs?t:t[0];if(!r.filter||r.filter(e)){if(l.length>0){const{resolve:t}=l.shift();t({done:!0,value:e})}else f.push(e);d()}};for(const t of n)i(t,h);for(const t of r.rejectionEvents)i(t,v);for(const t of r.resolutionEvents)i(t,_);return{[E](){return this},async next(){if(f.length>0){const t=f.shift();return{done:u&&0===f.length&&!y,value:t}}if(c)throw c=!1,s;return u?{done:!0,value:void 0}:new Promise(((t,e)=>l.push({resolve:t,reject:e})))},return:async t=>(d(),{done:u,value:t})}},b.TimeoutError=I;var C="object"==typeof u&&u&&u.Object===Object&&u,N="object"==typeof self&&self&&self.Object===Object&&self,w=C||N||Function("return this")(),R=w.Symbol,P=Object.prototype,D=P.hasOwnProperty,U=P.toString,j=R?R.toStringTag:void 0;var M=function(t){var e=D.call(t,j),r=t[j];try{t[j]=void 0;var n=!0}catch(t){}var o=U.call(t);return n&&(e?t[j]=r:delete t[j]),o},F=Object.prototype.toString;var L=function(t){return F.call(t)},x=R?R.toStringTag:void 0;var B=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":x&&x in Object(t)?M(t):L(t)};var k=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var G,H=function(t){if(!k(t))return!1;var e=B(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},W=w["__core-js_shared__"],z=(G=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"";var V=function(t){return!!z&&z in t},q=Function.prototype.toString;var Y=function(t){if(null!=t){try{return q.call(t)}catch(t){}try{return t+""}catch(t){}}return""},J=/^\[object .+?Constructor\]$/,$=Function.prototype,K=Object.prototype,Z=$.toString,Q=K.hasOwnProperty,X=RegExp("^"+Z.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var tt=function(t){return!(!k(t)||V(t))&&(H(t)?X:J).test(Y(t))};var et=function(t,e){return null==t?void 0:t[e]};var rt=function(t,e){var r=et(t,e);return tt(r)?r:void 0},nt=rt(Object,"create");var ot=function(){this.__data__=nt?nt(null):{},this.size=0};var it=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},at=Object.prototype.hasOwnProperty;var st=function(t){var e=this.__data__;if(nt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return at.call(e,t)?e[t]:void 0},ut=Object.prototype.hasOwnProperty;var ct=function(t){var e=this.__data__;return nt?void 0!==e[t]:ut.call(e,t)};var lt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nt&&void 0===e?"__lodash_hash_undefined__":e,this};function ft(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ft.prototype.clear=ot,ft.prototype.delete=it,ft.prototype.get=st,ft.prototype.has=ct,ft.prototype.set=lt;var pt=ft;var yt=function(){this.__data__=[],this.size=0};var ht=function(t,e){return t===e||t!=t&&e!=e};var dt=function(t,e){for(var r=t.length;r--;)if(ht(t[r][0],e))return r;return-1},vt=Array.prototype.splice;var _t=function(t){var e=this.__data__,r=dt(e,t);return!(r<0)&&(r==e.length-1?e.pop():vt.call(e,r,1),--this.size,!0)};var Et=function(t){var e=this.__data__,r=dt(e,t);return r<0?void 0:e[r][1]};var mt=function(t){return dt(this.__data__,t)>-1};var Ot=function(t,e){var r=this.__data__,n=dt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function St(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}St.prototype.clear=yt,St.prototype.delete=_t,St.prototype.get=Et,St.prototype.has=mt,St.prototype.set=Ot;var gt=St,bt=rt(w,"Map");var At=function(){this.size=0,this.__data__={hash:new pt,map:new(bt||gt),string:new pt}};var Tt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var It=function(t,e){var r=t.__data__;return Tt(e)?r["string"==typeof e?"string":"hash"]:r.map};var Ct=function(t){var e=It(this,t).delete(t);return this.size-=e?1:0,e};var Nt=function(t){return It(this,t).get(t)};var wt=function(t){return It(this,t).has(t)};var Rt=function(t,e){var r=It(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Pt.prototype.clear=At,Pt.prototype.delete=Ct,Pt.prototype.get=Nt,Pt.prototype.has=wt,Pt.prototype.set=Rt;var Dt=Pt;var Ut=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var jt=function(t){return this.__data__.has(t)};function Mt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Dt;++e<r;)this.add(t[e])}Mt.prototype.add=Mt.prototype.push=Ut,Mt.prototype.has=jt;var Ft=Mt;var Lt=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1};var xt=function(t){return t!=t};var Bt=function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1};var kt=function(t,e,r){return e==e?Bt(t,e,r):Lt(t,xt,r)};var Gt=function(t,e){return!!(null==t?0:t.length)&&kt(t,e,0)>-1};var Ht=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1};var Wt=function(t,e){return t.has(e)},zt=rt(w,"Set");var Vt=function(){};var qt=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},Yt=zt&&1/qt(new zt([,-0]))[1]==1/0?function(t){return new zt(t)}:Vt;var Jt=function(t,e,r){var n=-1,o=Gt,i=t.length,a=!0,s=[],u=s;if(r)a=!1,o=Ht;else if(i>=200){var c=e?null:Yt(t);if(c)return qt(c);a=!1,o=Wt,u=new Ft}else u=e?[]:s;t:for(;++n<i;){var l=t[n],f=e?e(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var p=u.length;p--;)if(u[p]===f)continue t;e&&u.push(f),s.push(l)}else o(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s};var $t,Kt,Zt,Qt,Xt,te,ee,re,ne,oe=function(t){return t&&t.length?Jt(t):[]};!function(t){t.tags="twitch.tv/tags",t.commands="twitch.tv/commands",t.membership="twitch.tv/membership"}($t||($t={})),function(t){t.JOIN="JOIN",t.MODE="MODE",t.PART="PART",t.NAMES="353",t.NAMES_END="366"}(Kt||(Kt={})),function(t){t.CLEAR_CHAT="CLEARCHAT",t.GLOBALUSERSTATE="GLOBALUSERSTATE",t.PRIVATE_MESSAGE="PRIVMSG",t.ROOM_STATE="ROOMSTATE",t.USER_NOTICE="USERNOTICE",t.USER_STATE="USERSTATE"}(Zt||(Zt={})),function(t){t.WELCOME="001",t.PING="PING",t.PONG="PONG",t.WHISPER="WHISPER"}(Qt||(Qt={})),function(t){t.CLEAR_CHAT="CLEARCHAT",t.CLEAR_MESSAGE="CLEARMSG",t.HOST_TARGET="HOSTTARGET",t.NOTICE="NOTICE",t.RECONNECT="RECONNECT",t.ROOM_STATE="ROOMSTATE",t.USER_NOTICE="USERNOTICE",t.USER_STATE="USERSTATE"}(Xt||(Xt={})),function(t){t.WELCOME="001",t.PING="PING",t.PONG="PONG",t.RECONNECT="RECONNECT",t.WHISPER="PRIVMSG #jtv",t.JOIN="JOIN",t.MODE="MODE",t.PART="PART",t.NAMES="353",t.NAMES_END="366",t.CLEAR_CHAT="CLEARCHAT",t.CLEAR_MESSAGE="CLEARMSG",t.GLOBALUSERSTATE="GLOBALUSERSTATE",t.HOST_TARGET="HOSTTARGET",t.NOTICE="NOTICE",t.PRIVATE_MESSAGE="PRIVMSG",t.ROOM_STATE="ROOMSTATE",t.USER_NOTICE="USERNOTICE",t.USER_STATE="USERSTATE"}(te||(te={})),function(t){t.RAW="RAW",t.ALL="*",t.CONNECTED="CONNECTED",t.DISCONNECTED="DISCONNECTED",t.RECONNECT="RECONNECT",t.AUTHENTICATED="AUTHENTICATED",t.AUTHENTICATION_FAILED="AUTHENTICATION_FAILED",t.GLOBALUSERSTATE="GLOBALUSERSTATE",t.ERROR_ENCOUNTERED="ERROR_ENCOUNTERED",t.PARSE_ERROR_ENCOUNTERED="PARSE_ERROR_ENCOUNTERED",t.ANON_GIFT_PAID_UPGRADE="ANON_GIFT_PAID_UPGRADE",t.GIFT_PAID_UPGRADE="GIFT_PAID_UPGRADE",t.RAID="RAID",t.RESUBSCRIPTION="RESUBSCRIPTION",t.RITUAL="RITUAL",t.SUBSCRIPTION="SUBSCRIPTION",t.SUBSCRIPTION_GIFT="SUBSCRIPTION_GIFT",t.SUBSCRIPTION_GIFT_COMMUNITY="SUBSCRIPTION_GIFT_COMMUNITY",t.ROOM_MODS="ROOM_MODS",t.MOD_GAINED="MOD_GAINED",t.MOD_LOST="MOD_LOST",t.USER_BANNED="USER_BANNED",t.CHEER="CHEER",t.HOST_ON="HOST_ON",t.HOST_OFF="HOST_OFF",t.HOSTED="HOSTED",t.HOSTED_WITHOUT_VIEWERS="HOSTED/WITHOUT_VIEWERS",t.HOSTED_WITH_VIEWERS="HOSTED/WITH_VIEWERS",t.HOSTED_AUTO="HOSTED/AUTO"}(ee||(ee={})),function(t){t.BAN="ban",t.BLOCK="block",t.CLEAR="clear",t.COLOR="color",t.COMMERCIAL="commercial",t.DELETE="delete",t.EMOTE_ONLY="emoteonly",t.EMOTE_ONLY_OFF="emoteonlyoff",t.FOLLOWERS_ONLY="followers",t.FOLLOWERS_ONLY_OFF="followersoff",t.HELP="help",t.HOST="host",t.MARKER="marker",t.ME="me",t.MOD="mod",t.MODS="mods",t.R9K="r9kbeta",t.R9K_OFF="r9kbetaoff",t.RAID="raid",t.SLOW="slow",t.SLOW_OFF="slowoff",t.SUBSCRIBERS="subscribers",t.SUBSCRIBERS_OFF="subscribersoff",t.TIMEOUT="timeout",t.UNBAN="unban",t.UNBLOCK="unblock",t.UNHOST="unhost",t.UNMOD="unmod",t.UNRAID="unraid",t.UNVIP="unvip",t.VIP="vip",t.VIPS="vips",t.WHISPER="w"}(re||(re={})),function(t){t.ALREADY_BANNED="already_banned",t.ALREADY_EMOTE_ONLY_OFF="already_emote_only_off",t.ALREADY_EMOTE_ONLY_ON="already_emote_only_on",t.ALREADY_R9K_OFF="already_r9k_off",t.ALREADY_R9K_ON="already_r9k_on",t.ALREADY_SUBS_OFF="already_subs_off",t.ALREADY_SUBS_ON="already_subs_on",t.BAD_HOST_HOSTING="bad_host_hosting",t.BAD_MOD_MOD="bad_mod_mod",t.BAN_SUCCESS="ban_success",t.BAD_UNBAN_NO_BAN="bad_unban_no_ban",t.COLOR_CHANGED="color_changed",t.CMDS_AVAILABLE="cmds_available",t.COMMERCIAL_SUCCESS="commercial_success",t.EMOTE_ONLY_OFF="emote_only_off",t.EMOTE_ONLY_ON="emote_only_on",t.FOLLOWERS_OFF="followers_off",t.FOLLOWERS_ON="followers_on",t.FOLLOWERS_ONZERO="followers_onzero",t.HOST_OFF="host_off",t.HOST_ON="host_on",t.HOSTS_REMAINING="hosts_remaining",t.MSG_CHANNEL_SUSPENDED="msg_channel_suspended",t.MOD_SUCCESS="mod_success",t.NOT_HOSTING="not_hosting",t.R9K_OFF="r9k_off",t.R9K_ON="r9k_on",t.ROOM_MODS="room_mods",t.SLOW_OFF="slow_off",t.SLOW_ON="slow_on",t.SUBS_OFF="subs_off",t.SUBS_ON="subs_on",t.TIMEOUT_SUCCESS="timeout_success",t.UNBAN_SUCCESS="unban_success",t.UNMOD_SUCCESS="unmod_success",t.UNRAID_SUCCESS="unraid_success",t.UNRECOGNIZED_CMD="unrecognized_cmd"}(ne||(ne={}));Object.entries(ne).reduce((function(t,e){var n,o=a(e,2),i=o[0],s=o[1];return r(r({},t),((n={})[i]=s.toUpperCase(),n))}),{});var ie,ae,se=Object.keys(ne).reduce((function(t,e){var n;return r(r({},t),((n={})[e]=e,n[te.NOTICE+"/"+e.toUpperCase()]=e,n))}),{});!function(t){t.CHEER="CHEER",t.HOSTED_WITHOUT_VIEWERS="HOSTED_WITHOUT_VIEWERS",t.HOSTED_WITH_VIEWERS="HOSTED_WITH_VIEWERS",t.HOSTED_AUTO="HOSTED_AUTO"}(ie||(ie={})),function(t){t.ANON_GIFT_PAID_UPGRADE="anongiftpaidupgrade",t.GIFT_PAID_UPGRADE="giftpaidupgrade",t.RAID="raid",t.RESUBSCRIPTION="resub",t.RITUAL="ritual",t.SUBSCRIPTION="sub",t.SUBSCRIPTION_GIFT="subgift",t.SUBSCRIPTION_GIFT_COMMUNITY="submysterygift"}(ae||(ae={}));var ue,ce,le=Object.keys(ae).reduce((function(t,e){var n;return r(r({},t),((n={})[e]=e,n[te.USER_NOTICE+"/"+e]=e,n))}),{}),fe=r(r(r(r(r(r(r(r({},Kt),Zt),Qt),Xt),ee),se),ie),le);function pe(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}!function(t){t[t.admin=0]="admin",t[t.broadcaster=1]="broadcaster",t[t.globalMod=2]="globalMod",t[t.moderator=3]="moderator",t[t.partner=4]="partner",t[t.premium=5]="premium",t[t.staff=6]="staff",t[t.subGifter=7]="subGifter",t[t.turbo=8]="turbo",t[t.vip=9]="vip"}(ue||(ue={})),function(t){t[t.bits=0]="bits",t[t.bitsLeader=1]="bitsLeader",t[t.subscriber=2]="subscriber"}(ce||(ce={}));var ye=function(t,e,r){var n=r&&r.stringify||pe;if("object"==typeof t&&null!==t){var o=e.length+1;if(1===o)return t;var i=new Array(o);i[0]=n(t);for(var a=1;a<o;a++)i[a]=n(e[a]);return i.join(" ")}if("string"!=typeof t)return t;var s=e.length;if(0===s)return t;for(var u="",c=0,l=-1,f=t&&t.length||0,p=0;p<f;){if(37===t.charCodeAt(p)&&p+1<f){switch(l=l>-1?l:0,t.charCodeAt(p+1)){case 100:if(c>=s)break;if(l<p&&(u+=t.slice(l,p)),null==e[c])break;u+=Number(e[c]),l=p+=2;break;case 79:case 111:case 106:if(c>=s)break;if(l<p&&(u+=t.slice(l,p)),void 0===e[c])break;var y=typeof e[c];if("string"===y){u+="'"+e[c]+"'",l=p+2,p++;break}if("function"===y){u+=e[c].name||"<anonymous>",l=p+2,p++;break}u+=n(e[c]),l=p+2,p++;break;case 115:if(c>=s)break;l<p&&(u+=t.slice(l,p)),u+=String(e[c]),l=p+2,p++;break;case 37:l<p&&(u+=t.slice(l,p)),u+="%",l=p+2,p++}++c}++p}if(-1===l)return t;l<f&&(u+=t.slice(l));return u};var he=_e,de=function(){function t(t){return void 0!==t&&t}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(e){return t(self)||t(window)||t(this)||{}}}().console||{},ve={mapHttpRequest:Te,mapHttpResponse:Te,wrapRequestSerializer:Ie,wrapResponseSerializer:Ie,wrapErrorSerializer:Ie,req:Te,res:Te,err:function(t){var e={type:t.constructor.name,msg:t.message,stack:t.stack};for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}};function _e(t){(t=t||{}).browser=t.browser||{};var e=t.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");var r=t.browser.write||de;t.browser.write&&(t.browser.asObject=!0);var n=t.serializers||{},o=Array.isArray(t.browser.serialize)?t.browser.serialize.filter((function(t){return"!stdSerializers.err"!==t})):!0===t.browser.serialize&&Object.keys(n),i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===t.enabled&&(t.level="silent");var a=t.level||"info",s=Object.create(r);s.log||(s.log=Ce),Object.defineProperty(s,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(s,"level",{get:function(){return this._level},set:function(t){if("silent"!==t&&!this.levels.values[t])throw Error("unknown level "+t);this._level=t,Ee(u,s,"error","log"),Ee(u,s,"fatal","error"),Ee(u,s,"warn","error"),Ee(u,s,"info","log"),Ee(u,s,"debug","log"),Ee(u,s,"trace","log")}});var u={transmit:e,serialize:o,asObject:t.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:Ae(t)};return s.levels=_e.levels,s.level=a,s.setMaxListeners=s.getMaxListeners=s.emit=s.addListener=s.on=s.prependListener=s.once=s.prependOnceListener=s.removeListener=s.removeAllListeners=s.listeners=s.listenerCount=s.eventNames=s.write=s.flush=Ce,s.serializers=n,s._serialize=o,s._stdErrSerialize=i,s.child=function(r){if(!r)throw new Error("missing bindings for child Pino");var i=r.serializers;if(o&&i){var a=Object.assign({},n,i),s=!0===t.browser.serialize?Object.keys(a):o;delete r.serializers,Oe([r],s,a,this._stdErrSerialize)}function u(t){this._childLevel=1+(0|t._childLevel),this.error=Se(t,r,"error"),this.fatal=Se(t,r,"fatal"),this.warn=Se(t,r,"warn"),this.info=Se(t,r,"info"),this.debug=Se(t,r,"debug"),this.trace=Se(t,r,"trace"),a&&(this.serializers=a,this._serialize=s),e&&(this._logEvent=be([].concat(t._logEvent.bindings,r)))}return u.prototype=this,new u(this)},e&&(s._logEvent=be()),s}function Ee(t,e,r,n){var o=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Ce:o[r]?o[r]:de[r]||de[n]||Ce,function(t,e,r){if(!t.transmit&&e[r]===Ce)return;e[r]=(n=e[r],function(){for(var o=t.timestamp(),i=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===de?de:this,s=0;s<i.length;s++)i[s]=arguments[s];if(t.serialize&&!t.asObject&&Oe(i,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,me(this,r,i,o)):n.apply(a,i),t.transmit){var u=t.transmit.level||e.level,c=_e.levels.values[u],l=_e.levels.values[r];if(l<c)return;ge(this,{ts:o,methodLevel:r,methodValue:l,transmitLevel:u,transmitValue:_e.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},i)}});var n}(t,e,r)}function me(t,e,r,n){t._serialize&&Oe(r,t._serialize,t.serializers,t._stdErrSerialize);var o=r.slice(),i=o[0],a={};n&&(a.time=n),a.level=_e.levels.values[e];var s=1+(0|t._childLevel);if(s<1&&(s=1),null!==i&&"object"==typeof i){for(;s--&&"object"==typeof o[0];)Object.assign(a,o.shift());i=o.length?ye(o.shift(),o):void 0}else"string"==typeof i&&(i=ye(o.shift(),o));return void 0!==i&&(a.msg=i),a}function Oe(t,e,r,n){for(var o in t)if(n&&t[o]instanceof Error)t[o]=_e.stdSerializers.err(t[o]);else if("object"==typeof t[o]&&!Array.isArray(t[o]))for(var i in t[o])e&&e.indexOf(i)>-1&&i in r&&(t[o][i]=r[i](t[o][i]))}function Se(t,e,r){return function(){var n=new Array(1+arguments.length);n[0]=e;for(var o=1;o<n.length;o++)n[o]=arguments[o-1];return t[r].apply(this,n)}}function ge(t,e,r){var n=e.send,o=e.ts,i=e.methodLevel,a=e.methodValue,s=e.val,u=t._logEvent.bindings;Oe(r,t._serialize||Object.keys(t.serializers),t.serializers,void 0===t._stdErrSerialize||t._stdErrSerialize),t._logEvent.ts=o,t._logEvent.messages=r.filter((function(t){return-1===u.indexOf(t)})),t._logEvent.level.label=i,t._logEvent.level.value=a,n(i,t._logEvent,s),t._logEvent=be(u)}function be(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Ae(t){return"function"==typeof t.timestamp?t.timestamp:!1===t.timestamp?Ne:we}function Te(){return{}}function Ie(t){return t}function Ce(){}function Ne(){return!1}function we(){return Date.now()}_e.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},_e.stdSerializers=ve,_e.stdTimeFunctions=Object.assign({},{nullTime:Ne,epochTime:we,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}});var Re=function(t){void 0===t&&(t={});var e=t.name,o=n(t,["name"]),i=["TwitchJS"].concat(e||[]).join("/"),a=he(r({name:i,prettyPrint:!0,level:"info"},o));return a.profile=function(t){var e=Date.now();return t&&a.info(t),{done:function(t,r){var n=t+" ("+(Date.now()-e)+"ms)";r?a.error(n,r):a.info(n)}}},a};let Pe;"undefined"!=typeof WebSocket?Pe=WebSocket:"undefined"!=typeof MozWebSocket?Pe=MozWebSocket:void 0!==u?Pe=u.WebSocket||u.MozWebSocket:"undefined"!=typeof window?Pe=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(Pe=self.WebSocket||self.MozWebSocket);var De=Pe;class Ue extends Error{constructor(t){super(t),this.name="TimeoutError"}}const je=(t,e,r)=>new Promise(((n,o)=>{if("number"!=typeof e||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0)return void n(t);const i=setTimeout((()=>{if("function"==typeof r){try{n(r())}catch(t){o(t)}return}const i=r instanceof Error?r:new Ue("string"==typeof r?r:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),o(i)}),e);p(t.then(n,o),(()=>{clearTimeout(i)}))}));var Me=je,Fe=je,Le=Ue;Me.default=Fe,Me.TimeoutError=Le;var xe=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){let n=0,o=t.length;for(;o>0;){const i=o/2|0;let a=n+i;r(t[a],e)<=0?(n=++a,o-=i+1):o=i}return n}}));c(xe);var Be=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this._queue=[]}enqueue(t,e){const r={priority:(e=Object.assign({priority:0},e)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=e.priority)return void this._queue.push(r);const n=xe.default(this._queue,r,((t,e)=>e.priority-t.priority));this._queue.splice(n,0,r)}dequeue(){const t=this._queue.shift();return null==t?void 0:t.run}filter(t){return this._queue.filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return this._queue.length}}}));c(Be);var ke=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=()=>{},n=new Me.TimeoutError;e.default=class extends f{constructor(t){var e,n,o,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,!("number"==typeof(t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Be.default},t)).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==n?n:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(o=t.interval)||void 0===o?void 0:o.toString())&&void 0!==i?i:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||0===t.interval,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=!0===t.throwOnTimeout,this._isPaused=!1===t.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(void 0===this._intervalId){const e=this._intervalEnd-t;if(!(e<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),e)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),t&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,e={}){return new Promise(((r,o)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===e.timeout?t():Me.default(Promise.resolve(t()),void 0===e.timeout?this._timeout:e.timeout,(()=>{(void 0===e.throwOnTimeout?this._throwOnTimeout:e.throwOnTimeout)&&o(n)}));r(await i)}catch(t){o(t)}this._next()}),e),this._tryToStartAnother(),this.emit("add")}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((t=>{const e=this._resolveEmpty;this._resolveEmpty=()=>{e(),t()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((t=>{const e=this._resolveIdle;this._resolveIdle=()=>{e(),t()}}))}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}}})),Ge=c(ke),He=15e4,We=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),Object.defineProperty(this,"name",{value:this.constructor.name})}}e.ParseError=class extends r{};e.FormatError=class extends r{}}));c(We);We.ParseError,We.FormatError;var ze=l((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.shouldEscapeString=function(t){console.log(t);for(let e=0;e<t.length;e+=1){switch(t.charCodeAt(e)){case 10:case 13:case 32:case 59:case 92:return!0}}return!1},e.escapeString=function(t){if(!t)return"";let e="";for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);switch(n){case 10:e+="\\n";break;case 13:e+="\\r";break;case 32:e+="\\s";break;case 59:e+="\\:";break;case 92:e+="\\\\";break;default:e+=String.fromCharCode(n)}}return e},e.unescapeString=function(t){if(!t)return"";let e;if(-1===(e=t.indexOf("\\")))return t;const r=t.length-1;let n=0,o="";do{if(n<e&&(o+=t.slice(n,e)),(n=e+1)>=r)break;let i=t.charCodeAt(n);switch(i){case 58:i=59;break;case 110:i=10;break;case 114:i=13;break;case 115:i=32}n+=1,o+=String.fromCharCode(i)}while(-1!==(e=t.indexOf("\\",n)));return n<=r&&(o+=t.slice(n)),o}}));c(ze);ze.shouldEscapeString,ze.escapeString,ze.unescapeString;var Ve=l((function(t,e){function r(t){const e={},r=t.split(";"),n=r.length;for(let t=0;t<n;t+=1){const[n,o]=r[t].split("=");e[n]=void 0===o||ze.unescapeString(o)}return e}function n(t){if(!t)return null;let e,r;if(0===(e=t.indexOf("!")))return null;if(0===(r=t.indexOf("@",e+1)))return null;const n={};return e>-1&&r>-1?(n.name=t.slice(0,e),n.user=t.slice(e+1,r),n.host=t.slice(r+1)):e>-1?(n.name=t.slice(0,e),n.user=t.slice(e+1)):r>-1?(n.name=t.slice(0,r),n.host=t.slice(r+1)):n.name=t,n}Object.defineProperty(e,"__esModule",{value:!0}),e.parseTags=r,e.parsePrefix=n,e.parse=function(t){const e={};Object.defineProperties(e,{middle:{writable:!0,value:[]},trailing:{writable:!0,value:void 0},params:{enumerable:!0,get(){return this.middle.concat(this.trailing||[])}}});let o=0,i=0;if(64===t.charCodeAt(o)){if(-1===(i=t.indexOf(" ")))throw new We.ParseError("Invalid Message");e.tags=r(t.slice(o+1,i)),o=i+1}for(;32===t.charCodeAt(o);)o+=1;if(58===t.charCodeAt(o)){if(-1===(i=t.indexOf(" ",o)))throw new We.ParseError("Invalid Message");const r=n(t.slice(o+1,i));for(r&&(e.prefix=r),o=i+1;32===t.charCodeAt(o);)o+=1}if(-1===(i=t.indexOf(" ",o))){if(t.length>o)return e.command=t.slice(o),e;throw new We.ParseError("Invalid Message")}for(e.command=t.slice(o,i),o=i+1;32===t.charCodeAt(o);)o+=1;for(;o<t.length;){if(58===t.charCodeAt(o)){e.trailing=t.slice(o+1);break}if(-1===(i=t.indexOf(" ",o))){e.middle.push(t.slice(o));break}for(e.middle.push(t.slice(o,i)),o=i+1;32===t.charCodeAt(o);)o+=1}return e}}));c(Ve);Ve.parseTags,Ve.parsePrefix;var qe=Ve.parse;const Ye=t=>"object"==typeof t&&null!==t,Je=t=>Ye(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),$e=(t,e,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(t))return n.get(t);n.set(t,r.target);const{target:o}=r;delete r.target;const i=t=>t.map((t=>Je(t)?$e(t,e,r,n):t));if(Array.isArray(t))return i(t);for(const[a,s]of Object.entries(t)){let[u,c]=e(a,s,t);r.deep&&Je(c)&&(c=Array.isArray(c)?i(c):$e(c,e,r,n)),o[u]=c}return o};var Ke=(t,e,r)=>{if(!Ye(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return $e(t,e,r)};const Ze=(t,e)=>{if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);if(t=Array.isArray(t)?t.map((t=>t.trim())).filter((t=>t.length)).join("-"):t.trim(),0===t.length)return"";if(1===t.length)return e.pascalCase?t.toUpperCase():t.toLowerCase();return t!==t.toLowerCase()&&(t=(t=>{let e=!1,r=!1,n=!1;for(let o=0;o<t.length;o++){const i=t[o];e&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(t=t.slice(0,o)+"-"+t.slice(o),e=!1,n=r,r=!0,o++):r&&n&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(t=t.slice(0,o-1)+"-"+t.slice(o-1),n=r,r=!1,e=!0):(e=i.toLowerCase()===i&&i.toUpperCase()!==i,n=r,r=i.toUpperCase()===i&&i.toLowerCase()!==i)}return t})(t)),t=t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,((t,e)=>e.toUpperCase())).replace(/\d+(\w|$)/g,(t=>t.toUpperCase())),r=t,e.pascalCase?r.charAt(0).toUpperCase()+r.slice(1):r;var r};var Qe=Ze,Xe=Ze;Qe.default=Xe;class tr{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const e=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,e),e}}set(t,e){return this.cache.has(t)?this.cache.set(t,e):this._set(t,e),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){return this.cache.has(t)?this.cache.get(t):this.oldCache.has(t)?this.oldCache.get(t):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[e]=t;this.cache.has(e)||(yield t)}}get size(){let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return this._size+t}}const er=new tr({maxSize:1e5}),rr=t=>!("object"!=typeof t||null===t||t instanceof RegExp||t instanceof Error||t instanceof Date),nr=(t,e)=>{if(!rr(t))return t;e={deep:!1,pascalCase:!1,...e};const{exclude:r,pascalCase:n,stopPaths:o,deep:i}=e,a=new Set(o),s=t=>(e,o)=>{if(i&&rr(o)){const r=void 0===t?e:`${t}.${e}`;a.has(r)||(o=Ke(o,s(r)))}if(!r||!((t,e)=>t.some((t=>"string"==typeof t?t===e:(t.lastIndex=0,t.test(e)))))(r,e)){const t=n?`${e}_`:e;if(er.has(t))e=er.get(t);else{const r=Qe(e,{pascalCase:n});e.length<100&&er.set(t,r),e=r}}return[e,o]};return Ke(t,s(void 0))};var or=(t,e)=>Array.isArray(t)?Object.keys(t).map((r=>nr(t[r],e))):nr(t,e),ir=Object.prototype;var ar=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ir)};var sr=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),ur=Object.prototype.hasOwnProperty;var cr=function(t){if(!ar(t))return sr(t);var e=[];for(var r in Object(t))ur.call(t,r)&&"constructor"!=r&&e.push(r);return e},lr=rt(w,"DataView"),fr=rt(w,"Promise"),pr=rt(w,"WeakMap"),yr="[object Map]",hr="[object Promise]",dr="[object Set]",vr="[object WeakMap]",_r="[object DataView]",Er=Y(lr),mr=Y(bt),Or=Y(fr),Sr=Y(zt),gr=Y(pr),br=B;(lr&&br(new lr(new ArrayBuffer(1)))!=_r||bt&&br(new bt)!=yr||fr&&br(fr.resolve())!=hr||zt&&br(new zt)!=dr||pr&&br(new pr)!=vr)&&(br=function(t){var e=B(t),r="[object Object]"==e?t.constructor:void 0,n=r?Y(r):"";if(n)switch(n){case Er:return _r;case mr:return yr;case Or:return hr;case Sr:return dr;case gr:return vr}return e});var Ar=br;var Tr=function(t){return null!=t&&"object"==typeof t};var Ir=function(t){return Tr(t)&&"[object Arguments]"==B(t)},Cr=Object.prototype,Nr=Cr.hasOwnProperty,wr=Cr.propertyIsEnumerable,Rr=Ir(function(){return arguments}())?Ir:function(t){return Tr(t)&&Nr.call(t,"callee")&&!wr.call(t,"callee")},Pr=Rr,Dr=Array.isArray;var Ur=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var jr=function(t){return null!=t&&Ur(t.length)&&!H(t)};var Mr=function(){return!1},Fr=l((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?w.Buffer:void 0,i=(o?o.isBuffer:void 0)||Mr;t.exports=i})),Lr={};Lr["[object Float32Array]"]=Lr["[object Float64Array]"]=Lr["[object Int8Array]"]=Lr["[object Int16Array]"]=Lr["[object Int32Array]"]=Lr["[object Uint8Array]"]=Lr["[object Uint8ClampedArray]"]=Lr["[object Uint16Array]"]=Lr["[object Uint32Array]"]=!0,Lr["[object Arguments]"]=Lr["[object Array]"]=Lr["[object ArrayBuffer]"]=Lr["[object Boolean]"]=Lr["[object DataView]"]=Lr["[object Date]"]=Lr["[object Error]"]=Lr["[object Function]"]=Lr["[object Map]"]=Lr["[object Number]"]=Lr["[object Object]"]=Lr["[object RegExp]"]=Lr["[object Set]"]=Lr["[object String]"]=Lr["[object WeakMap]"]=!1;var xr=function(t){return Tr(t)&&Ur(t.length)&&!!Lr[B(t)]};var Br=function(t){return function(e){return t(e)}},kr=l((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&C.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),Gr=kr&&kr.isTypedArray,Hr=Gr?Br(Gr):xr,Wr=Object.prototype.hasOwnProperty;var zr=function(t){if(null==t)return!0;if(jr(t)&&(Dr(t)||"string"==typeof t||"function"==typeof t.splice||Fr(t)||Hr(t)||Pr(t)))return!t.length;var e=Ar(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(ar(t))return!cr(t).length;for(var r in t)if(Wr.call(t,r))return!1;return!0};var Vr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o};var qr=function(t){return"symbol"==typeof t||Tr(t)&&"[object Symbol]"==B(t)},Yr=R?R.prototype:void 0,Jr=Yr?Yr.toString:void 0;var $r=function t(e){if("string"==typeof e)return e;if(Dr(e))return Vr(e,t)+"";if(qr(e))return Jr?Jr.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r};var Kr=function(t){return null==t?"":$r(t)};var Zr=function(t){return Kr(t).toLowerCase()},Qr=function(t){var e=new Date(parseInt(t,10));return"Invalid Date"!==e.toString()?e:new Date},Xr=function(t,e){return void 0===e&&(e=""),t.split(/\r?\n/g).reduce((function(t,r){if(!r.length)return t;var n=qe(r),o=n.command,i=n.tags,u=void 0===i?{}:i,c=n.prefix,l=void 0===c?{name:void 0,user:void 0,host:void 0}:c,f=l.name,p=l.user,y=l.host,h=a(n.params,2),d=h[0],v=h[1],_=String(u["tmi-sent-ts"])||Date.now().toString(),E=zr(u)?{}:or(u),m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return"string"!=typeof e?t:"tmi.twitch.tv"===e?"tmi.twitch.tv":Zr(e).split(".")[0]}),void 0)}(y,f,p,E.login,E.username,E.displayName);return s(t,[{_raw:r,timestamp:Qr(_),command:o,event:o,channel:"*"!==d?d:"",username:m,isSelf:"string"==typeof m&&Zr(e)===m,tags:E,message:v}])}),[])},tn=function(t,e,r,n,o,i,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,a,s],l=0;(u=new Error(e.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}};var en=function(t,e,r){var n=r.length;if(null==t)return!n;for(t=Object(t);n--;){var o=r[n],i=e[o],a=t[o];if(void 0===a&&!(o in t)||!i(a))return!1}return!0};var rn=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},nn=/^(?:0|[1-9]\d*)$/;var on=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&nn.test(t))&&t>-1&&t%1==0&&t<e},an=Object.prototype.hasOwnProperty;var sn=function(t,e){var r=Dr(t),n=!r&&Pr(t),o=!r&&!n&&Fr(t),i=!r&&!n&&!o&&Hr(t),a=r||n||o||i,s=a?rn(t.length,String):[],u=s.length;for(var c in t)!e&&!an.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||on(c,u))||s.push(c);return s};var un=function(t){return jr(t)?sn(t):cr(t)};var cn=function(t,e){return null==e||en(t,e,un(e))};var ln=function(t){return t};var fn=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},pn=Math.max;var yn=function(t,e,r){return e=pn(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=pn(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=n[o];return s[e]=r(a),fn(t,this,s)}};var hn=function(t){return function(){return t}},dn=function(){try{var t=rt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),vn=dn?function(t,e){return dn(t,"toString",{configurable:!0,enumerable:!1,value:hn(e),writable:!0})}:ln,_n=Date.now;var En=function(t){var e=0,r=0;return function(){var n=_n(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},mn=En(vn);var On=function(t,e){return mn(yn(t,e,ln),t+"")};var Sn=function(t,e,r){if(!k(r))return!1;var n=typeof e;return!!("number"==n?jr(r)&&on(e,r.length):"string"==n&&e in r)&&ht(r[e],t)};var gn=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},bn=Object.prototype.hasOwnProperty;var An=function(t){if(!k(t))return gn(t);var e=ar(t),r=[];for(var n in t)("constructor"!=n||!e&&bn.call(t,n))&&r.push(n);return r};var Tn=function(t){return jr(t)?sn(t,!0):An(t)},In=Object.prototype,Cn=In.hasOwnProperty,Nn=On((function(t,e){t=Object(t);var r=-1,n=e.length,o=n>2?e[2]:void 0;for(o&&Sn(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],a=Tn(i),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(void 0===l||ht(l,In[c])&&!Cn.call(t,c))&&(t[c]=i[c])}return t}));var wn=function(t){return"string"==typeof t||!Dr(t)&&Tr(t)&&"[object String]"==B(t)},Rn=w.isFinite;var Pn=function(t){return"number"==typeof t&&Rn(t)};var Dn=function(t){return!0===t||!1===t||Tr(t)&&"[object Boolean]"==B(t)};var Un=function(t){return null==t},jn=Math.floor,Mn=Math.random;var Fn=function(t,e){return t+jn(Mn()*(e-t+1))},Ln=/\s/;var xn=function(t){for(var e=t.length;e--&&Ln.test(t.charAt(e)););return e},Bn=/^\s+/;var kn=function(t){return t?t.slice(0,xn(t)+1).replace(Bn,""):t},Gn=/^[-+]0x[0-9a-f]+$/i,Hn=/^0b[01]+$/i,Wn=/^0o[0-7]+$/i,zn=parseInt;var Vn=function(t){if("number"==typeof t)return t;if(qr(t))return NaN;if(k(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=k(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=kn(t);var r=Hn.test(t);return r||Wn.test(t)?zn(t.slice(2),r?2:8):Gn.test(t)?NaN:+t},qn=1/0;var Yn=function(t){return t?(t=Vn(t))===qn||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},Jn=parseFloat,$n=Math.min,Kn=Math.random;var Zn,Qn=function(t,e,r){if(r&&"boolean"!=typeof r&&Sn(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=Yn(t),void 0===e?(e=t,t=0):e=Yn(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var o=Kn();return $n(t+o*(e-t+Jn("1e-"+((o+"").length-1))),e)}return Fn(t,e)},Xn=function(t){return null==t?"TWITCHJS":t.startsWith("oauth:")?t:"oauth:"+t};!function(t){t.RAW="RAW",t.ALL="*",t.CONNECTED="CONNECTED",t.DISCONNECTED="DISCONNECTED",t.RECONNECT="RECONNECT",t.AUTHENTICATED="AUTHENTICATED",t.AUTHENTICATION_FAILED="AUTHENTICATION_FAILED",t.ERROR_ENCOUNTERED="ERROR_ENCOUNTERED"}(Zn||(Zn={}));var to=r(r({},te),Zn),eo=function(t){function n(e){var n=t.call(this)||this;n._clientPriority=100,n._options=function(t){var e,n={username:function(t){return Un(t)||wn(t)},token:function(t){return Un(t)||wn(t)},server:wn,port:Pn,ssl:Dn,isKnown:Dn,isVerified:Dn},o=Nn(r(r({},t),{username:(e=t.username,zr(e)||"justinfan"===e?"justinfan"+Qn(8e4,81e3):e),token:t.token?Xn(t.token):void 0}),{server:"irc-ws.chat.twitch.tv",port:443,ssl:!0,isKnown:!1,isVerified:!1});return tn(cn(o,n),"[twitch-js/Chat/Client] options: Expected valid options"),o}(e);var o=n._options,i=o.ssl,a=o.server,s=o.port,u=o.log;n._log=Re(r({name:"Chat/Client"},u));var c=i?"wss":"ws";return n._ws=new De(c+"://"+a+":"+s),n._ws.onopen=n._handleOpen.bind(n),n._ws.onmessage=n._handleMessage.bind(n),n._ws.onerror=n._handleError.bind(n),n._ws.onclose=n._handleClose.bind(n),n._queueAuthenticate=n._options.isVerified?new Ge({intervalCap:200,interval:1e4}):new Ge({intervalCap:20,interval:1e4}),n._queueJoin=n._options.isVerified?new Ge({intervalCap:2e3,interval:1e4}):new Ge({intervalCap:20,interval:1e4}),n._queue=new Ge({intervalCap:20,interval:3e4}),n._moderatorQueue=new Ge({intervalCap:100,interval:3e4}),n}return e(n,t),n.prototype.isReady=function(){return 1===this._ws.readyState},n.prototype.send=function(t,e){return o(this,void 0,void 0,(function(){var n,o,a,s=this;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n=r({priority:0,isModerator:!1},e),o=n.priority,a=n.isModerator,[4,(t.startsWith("JOIN")?this._queueJoin:t.startsWith("PASS")?this._queueAuthenticate:a&&this._moderatorQueue?this._moderatorQueue:this._queue).add((function(){return s._ws.send(t)}),{priority:o})];case 1:return i.sent(),this._log.trace("< "+t),[3,3];case 2:return i.sent(),this._log.error("< "+t),[3,3];case 3:return[2]}}))}))},n.prototype.disconnect=function(){var t,e;this._queueAuthenticate.pause(),this._queueJoin.pause(),this._queue.pause(),null===(t=this._moderatorQueue)||void 0===t||t.pause(),clearTimeout(this._queueAuthenticate._timeoutId),clearTimeout(this._queueJoin._timeoutId),clearTimeout(this._queue._timeoutId),clearTimeout(null===(e=this._moderatorQueue)||void 0===e?void 0:e._timeoutId),this._handleHeartbeatReset(),this._ws.close()},n.prototype._handleOpen=function(){var t=this._clientPriority;this.send("CAP REQ :"+Object.values($t).join(" "),{priority:t});var e=this._options,r=e.token,n=e.username;r&&n&&this.send("PASS "+r,{priority:t}),this.send("NICK "+n,{priority:t}),this._handleHeartbeat()},n.prototype._handleMessage=function(t){var e=this,n=t.data.toString();this._log.trace("> "+n.trim());var o=this._options,i=o.token,a=o.username,s=this._clientPriority;this._handleHeartbeat();var u=[];try{u=Xr(n,this._options.username)}catch(t){this._log.error("\nAn error occurred while attempting to parse a message from Twitch. Please use the following stack trace and raw message to resolve the bug in the TwitchJS source code, and then issue a pull request at https://github.com/twitch-js/twitch-js/compare\n\nStack trace:\n"+t+"\n\nRaw message:\n"+n),this.emit(to.ERROR_ENCOUNTERED,t)}u.forEach((function(t){var n=t.command||"";e._log.debug(r(r({},t),{_raw:void 0}),"> %s",n),!function(t){return void 0!==t&&t.command===te.NOTICE&&""===t.channel&&"Login authentication failed"===t.message}(t)?t.command===te.PING?e.send("PONG :tmi.twitch.tv",{priority:s}):i||t.command!==te.WELCOME?t.command===te.GLOBALUSERSTATE?(e._multiEmit([to.ALL,to.GLOBALUSERSTATE],r(r({},t),{event:to.GLOBALUSERSTATE})),i&&a&&e._multiEmit([to.ALL,to.CONNECTED],r(r({},t),{event:to.CONNECTED}))):t.command===te.RECONNECT?e._multiEmit([to.ALL,to.RECONNECT],r(r({},t),{event:to.RECONNECT})):e.emit(to.ALL,t):e._multiEmit([to.ALL,to.CONNECTED],r(r({},t),{event:to.CONNECTED})):(e._multiEmit([to.ALL,to.AUTHENTICATION_FAILED],r(r({},t),{event:to.AUTHENTICATION_FAILED})),e.disconnect())})),this.emit(to.RAW,n)},n.prototype._handleError=function(t){this._log.error(t)},n.prototype._handleClose=function(t){this.emit(to.DISCONNECTED)},n.prototype._handleHeartbeat=function(){var t=this;this._handleHeartbeatReset();var e=this._clientPriority;this._heartbeatTimeoutId=setTimeout((function(){t.send(te.PING,{priority:e})}),He),this._reconnectTimeoutId=setTimeout((function(){t.emit(to.RECONNECT)}),151e3)},n.prototype._handleHeartbeatReset=function(){this._heartbeatTimeoutId&&clearTimeout(this._heartbeatTimeoutId),this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId)},n.prototype._multiEmit=function(t,e){var r=this;Array.isArray(t)?t.forEach((function(t){return r.emit(t,e)})):this.emit(t,e)},n}(f);var ro=function(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Vn(e),r=Vn(r)),t(e,r)}}((function(t,e){return t>e}));var no=function(t){return Kr(t).toUpperCase()},oo=new RegExp("^msgParam(\\w+)"),io=/:.+@jtv\.tmi\.twitch\.tv PRIVMSG #?(\w+) :(\w+) is now (?:(auto) )?hosting[A-z ]+(\d+)?/,ao=Symbol("connect"),so=Symbol("connected"),uo=Symbol("disconnect"),co=Symbol("disconnected"),lo=Symbol("reconnect");var fo=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i};var po=function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:fo(t,e,r)},yo=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ho=function(t){return yo.test(t)};var vo=function(t){return t.split("")},_o="[\\ud800-\\udfff]",Eo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",mo="\\ud83c[\\udffb-\\udfff]",Oo="[^\\ud800-\\udfff]",So="(?:\\ud83c[\\udde6-\\uddff]){2}",go="[\\ud800-\\udbff][\\udc00-\\udfff]",bo="(?:"+Eo+"|"+mo+")"+"?",Ao="[\\ufe0e\\ufe0f]?",To=Ao+bo+("(?:\\u200d(?:"+[Oo,So,go].join("|")+")"+Ao+bo+")*"),Io="(?:"+[Oo+Eo+"?",Eo,So,go,_o].join("|")+")",Co=RegExp(mo+"(?="+mo+")|"+Io+To,"g");var No=function(t){return t.match(Co)||[]};var wo=function(t){return ho(t)?No(t):vo(t)};var Ro=function(t){return function(e){e=Kr(e);var r=ho(e)?wo(e):void 0,n=r?r[0]:e.charAt(0),o=r?po(r,1).join(""):e.slice(1);return n[t]()+o}}("toUpperCase");var Po=function(t){return Ro(Kr(t).toLowerCase())};var Do=function(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r};var Uo=function(t){return function(e){return null==t?void 0:t[e]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),jo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mo=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Fo=function(t){return(t=Kr(t))&&t.replace(jo,Uo).replace(Mo,"")},Lo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var xo=function(t){return t.match(Lo)||[]},Bo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var ko=function(t){return Bo.test(t)},Go="\\u2700-\\u27bf",Ho="a-z\\xdf-\\xf6\\xf8-\\xff",Wo="A-Z\\xc0-\\xd6\\xd8-\\xde",zo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vo="["+zo+"]",qo="\\d+",Yo="[\\u2700-\\u27bf]",Jo="["+Ho+"]",$o="[^\\ud800-\\udfff"+zo+qo+Go+Ho+Wo+"]",Ko="(?:\\ud83c[\\udde6-\\uddff]){2}",Zo="[\\ud800-\\udbff][\\udc00-\\udfff]",Qo="["+Wo+"]",Xo="(?:"+Jo+"|"+$o+")",ti="(?:"+Qo+"|"+$o+")",ei="(?:['’](?:d|ll|m|re|s|t|ve))?",ri="(?:['’](?:D|LL|M|RE|S|T|VE))?",ni="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",oi="[\\ufe0e\\ufe0f]?",ii=oi+ni+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Ko,Zo].join("|")+")"+oi+ni+")*"),ai="(?:"+[Yo,Ko,Zo].join("|")+")"+ii,si=RegExp([Qo+"?"+Jo+"+"+ei+"(?="+[Vo,Qo,"$"].join("|")+")",ti+"+"+ri+"(?="+[Vo,Qo+Xo,"$"].join("|")+")",Qo+"?"+Xo+"+"+ei,Qo+"+"+ri,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qo,ai].join("|"),"g");var ui=function(t){return t.match(si)||[]};var ci=function(t,e,r){return t=Kr(t),void 0===(e=r?void 0:e)?ko(t)?ui(t):xo(t):t.match(e)||[]},li=RegExp("['’]","g");var fi=function(t){return function(e){return Do(ci(Fo(e).replace(li,"")),t,"")}}((function(t,e,r){return e=e.toLowerCase(),t+(r?Po(e):e)}));var pi=function(){var t=arguments,e=Kr(t[0]);return t.length<3?e:e.replace(t[1],t[2])},yi=function(t){return"string"==typeof t?pi(t,/\\[sn]/g," "):void 0},hi=function(t){var e=parseInt(t,10);return Pn(e)?e:void 0},di=function(t){return"1"===t},vi=function(t){return a(t.split(": "),2)[1].split(", ")},_i=function(t){return Object.entries(t).reduce((function(t,e){var n,o,i,s,u,c,l=a(e,2),f=l[0],p=l[1];switch(f){case"followersOnly":return r(r({},t),((n={})[f]=0===(c=parseInt(p,10))||c>0&&c,n));case"broadcasterLang":return r(r({},t),((o={})[f]=yi(p),o));case"slow":return r(r({},t),((i={})[f]=hi(p),i));case"emoteOnly":case"r9k":case"subsOnly":return r(r({},t),((s={})[f]=di(p),s));default:return r(r({},t),((u={})[f]=p,u))}}),{})},Ei=function(t){return r(r({},t),{badges:(i=t.badges,"string"==typeof i?i.split(",").reduce((function(t,e){var n,o,i,s=a(e.split("/"),2),u=s[0],c=s[1];if(void 0===c)return t;var l=fi(u);return r(r({},t),l in ue?((n={})[l]=di(c),n):l in ce?((o={})[l]=parseInt(c,10),o):((i={})[l]=c,i))}),{}):{}),bits:hi(t.bits),color:t.color,displayName:t.displayName,emotes:(o=t.emotes,"string"!=typeof o?[]:o.split("/").reduce((function(t,e){var r=a(e.split(":"),2),n=r[0],o=r[1];return n?s(t,o.split(",").map((function(t){var e=a(t.split("-"),2),r=e[0],o=e[1];return{id:n,start:parseInt(r,10),end:parseInt(o,10)}}))):t}),[])),emoteSets:(n=t.emoteSets,"string"==typeof n?n.split(","):[]),userType:(e=t.userType,"string"==typeof e?e:void 0),username:t.displayName?Zr(t.displayName):t.username,isModerator:"1"===t.mod});var e,n,o,i},mi=function(t){return r(r({},t),Ei(t))},Oi=Ei,Si=function(t){var e,o=t.tags,i=n(t,["tags"]),a=void 0!==(e=t)&&e.command===te.NOTICE&&""===e.channel&&"Login authentication failed"===e.message?r(r({},o),{msgId:Zr(fe.AUTHENTICATION_FAILED)}):o,s=no(a.msgId);return a.msgId===ne.ROOM_MODS?r(r({},i),{command:te.NOTICE,event:se.ROOM_MODS,tags:a,mods:vi(i.message)}):r(r({},i),{command:te.NOTICE,event:s,tags:a})},gi=function(t){var e=t.tags,o=n(t,["tags"]);return r(r({},o),{command:te.USER_STATE,event:te.USER_STATE,tags:Ei(e)})},bi=function(t){var e=te.USER_NOTICE,n=r(r({},Oi(t.tags)),{systemMsg:yi(t.tags.systemMsg)}),o=yi(t.tags.systemMsg)||"",i=function(t){return Object.entries(t).reduce((function(t,e){var n,o,i=a(e,2),s=i[0],u=i[1],c=a(oo.exec(s)||[],2)[1];switch(c){case"Months":case"MassGiftCount":case"PromoGiftTotal":case"SenderCount":case"ViewerCount":return r(r({},t),((n={})[fi(c)]=hi(u),n));case void 0:return t;default:return r(r({},t),((o={})[fi(c)]=yi(u),o))}}),{})}(n);switch(n.msgId){case ae.ANON_GIFT_PAID_UPGRADE:return r(r({},t),{command:e,event:ee.ANON_GIFT_PAID_UPGRADE,parameters:i,tags:n,systemMessage:o});case ae.GIFT_PAID_UPGRADE:return r(r({},t),{command:e,event:ee.GIFT_PAID_UPGRADE,parameters:i,tags:n,systemMessage:o});case ae.RAID:return r(r({},t),{command:e,event:ee.RAID,parameters:i,tags:n,systemMessage:o});case ae.RESUBSCRIPTION:return r(r({},t),{command:e,event:ee.RESUBSCRIPTION,parameters:i,tags:n,systemMessage:o});case ae.RITUAL:return r(r({},t),{command:e,event:ee.RITUAL,parameters:i,tags:n,systemMessage:o});case ae.SUBSCRIPTION_GIFT_COMMUNITY:return r(r({},t),{command:e,event:ee.SUBSCRIPTION_GIFT_COMMUNITY,parameters:i,tags:n,systemMessage:o});case ae.SUBSCRIPTION_GIFT:return r(r({},t),{command:e,event:ee.SUBSCRIPTION_GIFT,parameters:i,tags:n,systemMessage:o});case ae.SUBSCRIPTION:return r(r({},t),{command:e,event:ee.SUBSCRIPTION,parameters:i,tags:n,systemMessage:o});default:return r(r({},t),{command:e,event:no(n.msgId),tags:n,parameters:i,systemMessage:o})}},Ai=function(t){return"string"!=typeof t||0===t.length?"":(t=t.toLowerCase()).startsWith("#")?t:"#"+t},Ti=function(t){return null==t?"TWITCHJS":t.startsWith("oauth:")?t:"oauth:"+t},Ii=function(t){var e,n={username:function(t){return Un(t)||wn(t)},token:function(t){return Un(t)||wn(t)},isKnown:Dn,isVerified:Dn,connectionTimeout:Pn,joinTimeout:Pn,onAuthenticationFailure:H},o=Nn(r(r({},t),{username:t.username?(e=t.username,zr(e)||"justinfan"===e?"justinfan"+Qn(8e4,81e3):e):void 0,token:t.token?Ti(t.token):void 0}),{isKnown:!1,isVerified:!1,connectionTimeout:5e3,joinTimeout:1e3,onAuthenticationFailure:function(){return Promise.reject()}});return tn(cn(o,n),"[twitch-js/Chat] options: Expected valid options"),o},Ci=function(t){if(!(t=Ai(t)))throw new Error("Channel required");return t};var Ni,wi,Ri,Pi,Di,Ui=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ji=function(t){function r(e){var r=t.call(this,e)||this;return r.timestamp=new Date,Object.defineProperty(r,"name",{value:"TwitchJSError"}),r}return e(r,t),r}(function(t){function e(e){var r,n,o,i=this.constructor,a=t.call(this,e)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),r=a,n=i.prototype,(o=Object.setPrototypeOf)?o(r,n):r.__proto__=n,function(t,e){void 0===e&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}(a),a}return Ui(e,t),e}(Error)),Mi=function(t){function r(e,r){var n=t.call(this,e)||this;return n.body=r,Object.defineProperty(n,"name",{value:"TwitchJSAuthenticationError"}),n}return e(r,t),r}(ji),Fi=function(t){function r(e,r){var n=t.call(this,e)||this;return n.body=r,Object.defineProperty(n,"name",{value:"TwitchJSChatError"}),n}return e(r,t),r}(ji);(function(t){function r(e,r){var n=t.call(this,e)||this;return n.body=r,Object.defineProperty(n,"name",{value:"TwitchJSChatParseError"}),n}e(r,t)})(ji),function(t){function r(e,r){var n=t.call(this,e)||this;return n.body=r,Object.defineProperty(n,"name",{value:"TwitchJSChatJoinError"}),n}e(r,t)}(ji),function(t){function r(e,r){var n=t.call(this,e)||this;return n.body=r,Object.defineProperty(n,"name",{value:"TwitchJSChatTimeoutError"}),n}e(r,t)}(ji);!function(t){t[t.WAITING=0]="WAITING",t[t.CONNECTING=1]="CONNECTING",t[t.RECONNECTING=2]="RECONNECTING",t[t.CONNECTED=3]="CONNECTED",t[t.DISCONNECTING=4]="DISCONNECTING",t[t.DISCONNECTED=5]="DISCONNECTED"}(Ni||(Ni={})),function(t){t.ALREADY_BANNED="NOTICE/ALREADY_BANNED",t.ALREADY_EMOTE_ONLY_OFF="NOTICE/ALREADY_EMOTE_ONLY_OFF",t.ALREADY_EMOTE_ONLY_ON="NOTICE/ALREADY_EMOTE_ONLY_ON",t.ALREADY_R9K_OFF="NOTICE/ALREADY_R9K_OFF",t.ALREADY_R9K_ON="NOTICE/ALREADY_R9K_ON",t.ALREADY_SUBS_OFF="NOTICE/ALREADY_SUBS_OFF",t.ALREADY_SUBS_ON="NOTICE/ALREADY_SUBS_ON",t.BAD_HOST_HOSTING="NOTICE/BAD_HOST_HOSTING",t.BAD_MOD_MOD="NOTICE/BAD_MOD_MOD",t.BAN_SUCCESS="NOTICE/BAN_SUCCESS",t.BAD_UNBAN_NO_BAN="NOTICE/BAD_UNBAN_NO_BAN",t.COLOR_CHANGED="NOTICE/COLOR_CHANGED",t.CMDS_AVAILABLE="NOTICE/CMDS_AVAILABLE",t.COMMERCIAL_SUCCESS="NOTICE/COMMERCIAL_SUCCESS",t.EMOTE_ONLY_OFF="NOTICE/EMOTE_ONLY_OFF",t.EMOTE_ONLY_ON="NOTICE/EMOTE_ONLY_ON",t.FOLLOWERS_OFF="NOTICE/FOLLOWERS_OFF",t.FOLLOWERS_ON="NOTICE/FOLLOWERS_ON",t.FOLLOWERS_ONZERO="NOTICE/FOLLOWERS_ONZERO",t.HOST_OFF="NOTICE/HOST_OFF",t.HOST_ON="NOTICE/HOST_ON",t.HOSTS_REMAINING="NOTICE/HOSTS_REMAINING",t.MSG_CHANNEL_SUSPENDED="NOTICE/MSG_CHANNEL_SUSPENDED",t.MOD_SUCCESS="NOTICE/MOD_SUCCESS",t.NOT_HOSTING="NOTICE/NOT_HOSTING",t.R9K_OFF="NOTICE/R9K_OFF",t.R9K_ON="NOTICE/R9K_ON",t.ROOM_MODS="NOTICE/ROOM_MODS",t.SLOW_OFF="NOTICE/SLOW_OFF",t.SLOW_ON="NOTICE/SLOW_ON",t.SUBS_OFF="NOTICE/SUBS_OFF",t.SUBS_ON="NOTICE/SUBS_ON",t.TIMEOUT_SUCCESS="NOTICE/TIMEOUT_SUCCESS",t.UNBAN_SUCCESS="NOTICE/UNBAN_SUCCESS",t.UNMOD_SUCCESS="NOTICE/UNMOD_SUCCESS",t.UNRAID_SUCCESS="NOTICE/UNRAID_SUCCESS",t.UNRECOGNIZED_CMD="NOTICE/UNRECOGNIZED_CMD"}(wi||(wi={})),function(t){t.CHEER="PRIVMSG/CHEER",t.HOSTED_WITHOUT_VIEWERS="PRIVMSG/HOSTED_WITHOUT_VIEWERS",t.HOSTED_WITH_VIEWERS="PRIVMSG/HOSTED_WITH_VIEWERS",t.HOSTED_AUTO="PRIVMSG/HOSTED_AUTO"}(Ri||(Ri={})),function(t){t.ANON_GIFT_PAID_UPGRADE="USERNOTICE/ANON_GIFT_PAID_UPGRADE",t.GIFT_PAID_UPGRADE="USERNOTICE/GIFT_PAID_UPGRADE",t.RAID="USERNOTICE/RAID",t.RESUBSCRIPTION="USERNOTICE/RESUBSCRIPTION",t.RITUAL="USERNOTICE/RITUAL",t.SUBSCRIPTION="USERNOTICE/SUBSCRIPTION",t.SUBSCRIPTION_GIFT="USERNOTICE/SUBSCRIPTION_GIFT",t.SUBSCRIPTION_GIFT_COMMUNITY="USERNOTICE/SUBSCRIPTION_GIFT_COMMUNITY"}(Pi||(Pi={}));var Li,xi=function(t){function u(e){var a=t.call(this)||this;return a._internalEmitter=new f,a._readyState=Ni.WAITING,a._connectionAttempts=0,a._channelState={},a._isAuthenticated=!1,a._handleConnect=function(){var t=a._log.profile("connecting ...");a._readyState=Ni.CONNECTING,a._connectionAttempts+=1,a._client&&a._client.removeAllListeners(),a._client=new eo(a._options),a._client.once(to.DISCONNECTED,(function(){return a._internalEmitter.emit(uo)})),a._client.once(to.RECONNECT,(function(){return a._internalEmitter.emit(lo)})),a._client.once(to.AUTHENTICATION_FAILED,a._handleClientAuthenticationFailure),a._client.once(to.CONNECTED,(function(e){if(a._readyState=Ni.CONNECTED,a._options.token&&a._options.username){var o=(s=(i=e).tags,u=n(i,["tags"]),r(r({},u),{command:te.GLOBALUSERSTATE,event:te.GLOBALUSERSTATE,tags:mi(s)}));a._globalUserState=o.tags,a._isAuthenticated=!0}var i,s,u;a._handleJoinsAfterConnect(),a._internalEmitter.emit(so),t.done("connected")})),a._client.on(to.ALL,a._handleClientMessage,a)},a._handleDisconnect=function(){var t,e;a._log.info("disconnecting ..."),a._readyState=Ni.DISCONNECTING,a._isAuthenticated=!1,a._clearChannelState(),null===(t=a._client)||void 0===t||t.once(to.DISCONNECTED,(function(){a._internalEmitter.emit(co),a._readyState=Ni.DISCONNECTED,a._log.info("disconnected")})),null===(e=a._client)||void 0===e||e.disconnect()},a._handleReconnect=function(){var t,e,r;a._log.info("reconnecting ..."),a._readyState=Ni.RECONNECTING,null===(t=a._client)||void 0===t||t.removeAllListeners(),null===(e=a._client)||void 0===e||e.once(to.DISCONNECTED,(function(){a._internalEmitter.emit(ao)})),null===(r=a._client)||void 0===r||r.disconnect()},a._handleClientAuthenticationFailure=function(t){return o(a,void 0,void 0,(function(){var e,n,o,a,s,u;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this._log.info("retrying ..."),[4,null===(u=(s=this._options).onAuthenticationFailure)||void 0===u?void 0:u.call(s)];case 1:return(e=i.sent())&&(this._log.info("re-authenticating ..."),this._options=r(r({},this._options),{token:e})),this._internalEmitter.emit(ao),[3,3];case 2:return n=i.sent(),o=n||t,a=new Mi((null==t?void 0:t.message)||"Login authentication failed",t),this._internalEmitter.emit(fe.ERROR_ENCOUNTERED,a),this._log.error(o,"authentication failed"),[3,3];case 3:return[2]}}))}))},a._options=Ii(e),a._log=Re(r({name:"Chat"},a._options.log)),a._internalEmitter.on(ao,a._handleConnect),a._internalEmitter.on(uo,a._handleDisconnect),a._internalEmitter.on(lo,a._handleReconnect),a}return e(u,t),u.prototype.connect=function(){return this._connectionInProgress||(this._connectionInProgress=b(this._internalEmitter,so,{rejectionEvents:[fe.ERROR_ENCOUNTERED],timeout:this._options.connectionTimeout}),this._internalEmitter.emit(ao)),this._connectionInProgress},u.prototype.updateOptions=function(t){var e=this._options,n=e.token,o=e.username;this._options=Ii(r(r({},t),{token:n,username:o}))},u.prototype.send=function(t,e){if(!this._client)throw new Fi("Not connected");return this._client.send(t,e)},u.prototype.disconnect=function(){return this._connectionInProgress&&(this._connectionInProgress.cancel(),this._connectionInProgress=void 0),this._disconnectionInProgress=b(this._internalEmitter,co,{timeout:this._options.connectionTimeout}).catch(),this._internalEmitter.emit(uo),this._disconnectionInProgress},u.prototype.reconnect=function(t){return this._reconnectionInProgress||(t&&(this._options=Ii(r(r({},this._options),t))),this._reconnectionInProgress=b(this._internalEmitter,so,{timeout:this._options.connectionTimeout}),this._internalEmitter.emit(lo)),this._reconnectionInProgress},u.prototype.join=function(t){return o(this,void 0,void 0,(function(){var e,r,n,o,s;return i(this,(function(i){switch(i.label){case 0:return t=Ci(t),e=this._log.profile("joining "+t),[4,Promise.all([b(this,te.ROOM_STATE+"/"+t),this._isAuthenticated?b(this,te.USER_STATE+"/"+t):void 0,this.send(te.JOIN+" "+t)])];case 1:return r=a.apply(void 0,[i.sent(),2]),n=r[0],o=r[1],s={roomState:n.tags,userState:o?o.tags:void 0},this._setChannelState(n.channel,s),e.done("Joined "+t),[2,s]}}))}))},u.prototype.part=function(t){return t=Ci(t),this._log.info("parting "+t),this._removeChannelState(t),this.send(te.PART+" "+t)},u.prototype.say=function(t,e,n){var a,s;return void 0===n&&(n={}),o(this,void 0,void 0,(function(){var o,u,c;return i(this,(function(i){switch(i.label){case 0:if(!this._isAuthenticated)throw new Fi("To send messages, please connect with a token and username");return t=Ci(t),o=e.startsWith("/"),u="1"===(null===(s=null===(a=this._channelState[t])||void 0===a?void 0:a.userState)||void 0===s?void 0:s.mod),o?this._log.info("CMD/"+t+" :"+e):this._log.info("PRIVMSG/"+t+" :"+e),c=o?Promise.resolve():b(this,te.USER_STATE+"/"+t),[4,Promise.all([c,this.send(te.PRIVATE_MESSAGE+" "+t+" :"+e,r({isModerator:u},n))])];case 1:return i.sent(),[2]}}))}))},u.prototype.broadcast=function(t){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(r){if(!this._isAuthenticated)throw new Fi("To broadcast, please connect with a token and username");return[2,this._getChannels().map((function(r){return e.say(r,t)}))]}))}))},u.prototype.ban=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.BAN+" "+e,[4,Promise.all([b(this,[wi.BAN_SUCCESS+"/"+t,wi.ALREADY_BANNED+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.block=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){return t=Ci(t),r="/"+re.BLOCK+" "+e,[2,this.say(t,r)]}))}))},u.prototype.delete=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){return t=Ci(t),r="/"+re.DELETE+" "+e,[2,this.say(t,r)]}))}))},u.prototype.clear=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.CLEAR,[4,Promise.all([b(this,[te.CLEAR_CHAT+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.color=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.COLOR+" "+e,[4,Promise.all([b(this,[wi.COLOR_CHANGED+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.commercial=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.COMMERCIAL+" "+e,[4,Promise.all([b(this,[wi.COMMERCIAL_SUCCESS+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.emoteOnly=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.EMOTE_ONLY,[4,Promise.all([b(this,[wi.EMOTE_ONLY_ON+"/"+t,wi.ALREADY_EMOTE_ONLY_ON+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.emoteOnlyOff=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.EMOTE_ONLY_OFF,[4,Promise.all([b(this,[wi.EMOTE_ONLY_OFF+"/"+t,wi.ALREADY_EMOTE_ONLY_OFF+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.followersOnly=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.FOLLOWERS_ONLY+" "+e,[4,Promise.all([b(this,[wi.FOLLOWERS_ONZERO+"/"+t,wi.FOLLOWERS_ON+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.followersOnlyOff=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.FOLLOWERS_ONLY_OFF,[4,Promise.all([b(this,[wi.FOLLOWERS_OFF+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.help=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.HELP,[4,Promise.all([b(this,[wi.CMDS_AVAILABLE+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.host=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.HOST+" "+e,[4,Promise.all([b(this,[wi.HOST_ON+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.marker=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){return t=Ci(t),r="/"+re.MARKER+" "+e.slice(0,140),[2,this.say(t,r)]}))}))},u.prototype.me=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){return t=Ci(t),r="/"+re.ME+" "+e,[2,this.say(t,r)]}))}))},u.prototype.mod=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.MOD+" "+e,[4,Promise.all([b(this,[wi.MOD_SUCCESS+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.mods=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.MODS,[4,Promise.all([b(this,[wi.ROOM_MODS+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.r9K=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.R9K,[4,Promise.all([b(this,[wi.R9K_ON+"/"+t,wi.ALREADY_R9K_ON+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.r9KOff=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.R9K_OFF,[4,Promise.all([b(this,[wi.R9K_OFF+"/"+t,wi.ALREADY_R9K_OFF+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.raid=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){return t=Ci(t),r="/"+re.RAID+" "+e,[2,this.say(t,r)]}))}))},u.prototype.slow=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.SLOW+" "+e,[4,Promise.all([b(this,[wi.SLOW_ON+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.slowOff=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.SLOW_OFF,[4,Promise.all([b(this,[wi.SLOW_OFF+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.subscribers=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.SUBSCRIBERS,[4,Promise.all([b(this,[wi.SUBS_ON+"/"+t,wi.ALREADY_SUBS_ON+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.subscribersOff=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.SUBSCRIBERS_OFF,[4,Promise.all([b(this,[wi.SUBS_OFF+"/"+t,wi.ALREADY_SUBS_OFF+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.timeout=function(t,e,r){return o(this,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return t=Ci(t),n=r?" "+r:"",o="/"+re.TIMEOUT+" "+e+n,[4,Promise.all([b(this,[wi.TIMEOUT_SUCCESS+"/"+t]),this.say(t,o)])];case 1:return s=a.apply(void 0,[i.sent(),1]),[2,s[0]]}}))}))},u.prototype.unban=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.UNBAN+" "+e,[4,Promise.all([b(this,[wi.UNBAN_SUCCESS+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.unblock=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){return t=Ci(t),r="/"+re.UNBLOCK+" "+e,[2,this.say(t,r)]}))}))},u.prototype.unhost=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.UNHOST,[4,Promise.all([b(this,[wi.HOST_OFF+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.unmod=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return t=Ci(t),r="/"+re.UNMOD+" "+e,[4,Promise.all([b(this,[wi.UNMOD_SUCCESS+"/"+t]),this.say(t,r)])];case 1:return n=a.apply(void 0,[o.sent(),1]),[2,n[0]]}}))}))},u.prototype.unraid=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return t=Ci(t),e="/"+re.UNRAID,[4,Promise.all([b(this,[wi.UNRAID_SUCCESS+"/"+t]),this.say(t,e)])];case 1:return r=a.apply(void 0,[n.sent(),1]),[2,r[0]]}}))}))},u.prototype.unvip=function(t,e){t=Ci(t);var r="/"+re.UNVIP+" "+e;return this.say(t,r)},u.prototype.vip=function(t,e){t=Ci(t);var r="/"+re.VIP+" "+e;return this.say(t,r)},u.prototype.vips=function(t){t=Ci(t);var e="/"+re.VIPS;return this.say(t,e)},u.prototype.whisper=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){if(!this._isAuthenticated)throw new Fi("To whisper, please connect with a token and username");return r="/"+re.WHISPER+" "+t+" "+e,[2,this.send(r)]}))}))},u.prototype._handleClientMessage=function(t){try{var e=a(this._parseMessageForEmitter(t),2),r=e[0],n=e[1];this._emit(r,n)}catch(e){this._log.error("\nAn error occurred while attempting to parse a message into a event. Please use the following stack trace and raw message to resolve the bug in the TwitchJS source code, and then issue a pull request at https://github.com/twitch-js/twitch-js/compare\n\nStack trace:\n"+e+"\n\nBase message:\n"+JSON.stringify(t)),this._internalEmitter.emit(to.ERROR_ENCOUNTERED,e)}},u.prototype._handleJoinsAfterConnect=function(){return o(this,void 0,void 0,(function(){var t,e,r=this;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this._getChannels(),[4,Promise.all(t.map((function(t){return r.join(t)})))];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),this._log.error(e,"unable to rejoin channels"),[3,3];case 3:return[2]}}))}))},u.prototype._getChannels=function(){return Object.keys(this._channelState)},u.prototype._getChannelState=function(t){return this._channelState[t]},u.prototype._setChannelState=function(t,e){this._channelState[t]=e},u.prototype._removeChannelState=function(t){this._channelState=Object.entries(this._channelState).reduce((function(e,n){var o,i=a(n,2),s=i[0],u=i[1];return s===t?e:r(r({},e),((o={})[s]=u,o))}),{})},u.prototype._clearChannelState=function(){this._channelState={}},u.prototype._parseMessageForEmitter=function(t){var e=Ai(t.channel),o=t.event||t.command;switch(t.command){case fe.JOIN:var i=function(t){var e=a(/:(.+)!(.+)@(.+).tmi.twitch.tv JOIN (#.+)/g.exec(t._raw)||[],5),n=e[1],o=e[4];return r(r({},t),{channel:o,command:te.JOIN,event:te.JOIN,username:n})}(t);return[s=o+"/"+e,i];case fe.PART:i=function(t){var e=a(/:(.+)!(.+)@(.+).tmi.twitch.tv PART (#.+)/g.exec(t._raw)||[],5),n=e[1],o=e[4];return r(r({},t),{channel:o,command:te.PART,event:te.PART,username:n})}(t);return[s=o+"/"+e,i];case fe.NAMES:i=function(t){var e=a(/:(.+).tmi.twitch.tv 353 (.+) = (#.+) :(.+)/g.exec(t._raw)||[],5),n=e[3],o=e[4].split(" ");return r(r({},t),{channel:n,command:te.NAMES,event:te.NAMES,usernames:o})}(t);return[s=o+"/"+e,i];case fe.NAMES_END:i=function(t){var e=a(/:(.+).tmi.twitch.tv 366 (.+) (#.+) :(.+)/g.exec(t._raw)||[],4),n=e[1],o=e[3];return r(r({},t),{channel:o,command:te.NAMES_END,event:te.NAMES_END,username:n})}(t);return[s=o+"/"+e,i];case fe.CLEAR_CHAT:i=function(t){var e=t.tags,o=t.message,i=n(t,["tags","message"]);return r(r({},i),void 0!==o?{tags:r(r({},e),{banReason:yi(e.banReason),banDuration:hi(e.banDuration)}),command:te.CLEAR_CHAT,event:ee.USER_BANNED,username:o}:{command:te.CLEAR_CHAT,event:te.CLEAR_CHAT})}(t);return[s=o+"/"+i.event+"/"+e,i];case fe.CLEAR_MESSAGE:i=function(t){var e=t.tags;return r(r({},t),{tags:{login:e.login,targetMsgId:e.targetMsgId},command:te.CLEAR_MESSAGE,event:te.CLEAR_MESSAGE,targetMessageId:e.targetMsgId})}(t);return[s=o+"/"+e,i];case fe.HOST_TARGET:i=function(t){var e=a(/:tmi.twitch.tv HOSTTARGET (#[^\s]+) :([^\s]+)?\s?(\d+)?/g.exec(t._raw)||[],4),n=e[1],o=e[2],i=e[3],s="-"===o;return r(r({},t),{channel:n,username:o,command:te.HOST_TARGET,event:s?ee.HOST_OFF:ee.HOST_ON,numberOfViewers:Pn(Vn(i))?parseInt(i,10):void 0})}(t);return[s=o+"/"+e,i];case fe.MODE:i=function(t){var e=a(/:[^\s]+ MODE (#[^\s]+) (-|\+)o ([^\s]+)/g.exec(t._raw)||[],4),n=e[1],o=e[2],i=e[3],s="+"===o,u=r(r({},t),{command:te.MODE,channel:n,username:i});return r(r({},u),s?{event:ee.MOD_GAINED,message:"+o",isModerator:!0}:{event:ee.MOD_LOST,message:"-o",isModerator:!1})}(t);var s=o+"/"+e,u=this._getChannelState(e);return this._isAuthenticated&&void 0!==(null==u?void 0:u.userState)&&i.username===this._options.username&&this._setChannelState(e,r(r({},u),{userState:r(r({},u.userState),{mod:i.isModerator?"1":"0",isModerator:i.isModerator})})),[s,i];case fe.USER_STATE:i=gi(t),s=o+"/"+e;return(u=this._getChannelState(e))&&this._setChannelState(e,r(r({},u),{userState:i.tags})),[s,i];case fe.ROOM_STATE:i=function(t){var e=t.tags,o=n(t,["tags"]);return r(r({},o),{command:te.ROOM_STATE,event:te.ROOM_STATE,tags:_i(e)})}(t),s=o+"/"+e;return this._setChannelState(e,r(r({},this._getChannelState(e)),{roomState:i})),[s,i];case fe.NOTICE:return[s=o+"/"+(i=Si(t)).event+"/"+e,i];case fe.USER_NOTICE:return[s=o+"/"+(i=bi(t)).event+"/"+e,i];case fe.PRIVATE_MESSAGE:i=function(t){var e=t._raw,n=t.tags;if(ro(n.bits,0))return r(r({},gi(t)),{command:te.PRIVATE_MESSAGE,event:ee.CHEER,bits:parseInt(n.bits,10)});var o=a(io.exec(e)||[],5),i=o[0],s=o[1],u=o[2],c=o[3],l=o[4];return i?r(r({},t),c?{command:te.PRIVATE_MESSAGE,event:ee.HOSTED_AUTO,channel:"#"+s,tags:{displayName:u},numberOfViewers:hi(l)}:l?{command:te.PRIVATE_MESSAGE,event:ee.HOSTED_WITH_VIEWERS,channel:"#"+s,tags:{displayName:u},numberOfViewers:hi(l)}:{command:te.PRIVATE_MESSAGE,event:ee.HOSTED_WITHOUT_VIEWERS,channel:"#"+s,tags:{displayName:u}}):r(r({},gi(t)),{command:te.PRIVATE_MESSAGE,event:te.PRIVATE_MESSAGE})}(t);return[s=o+"/"+i.event+"/"+e,i];default:return[s=e?o+"/"+e:o,t]}},u.prototype._emit=function(e,r){var n=this;try{if(e)this._log.info(r,e),oe(e.split("/")).filter((function(t){return"#"!==t})).reduce((function(e,o){var i=s(e,[o]),a=i.join("/");return i.length>1&&t.prototype.emit.call(n,o,r),t.prototype.emit.call(n,a,r),i}),[]);t.prototype.emit.call(this,fe.ALL,r)}catch(t){this._log.error("\nWhile attempting to handle the "+r.command+" event, an error occurred in your implementation. To avoid seeing this message, please resolve the error:\n\n"+t.stack+"\n\nParsed messages:\n"+JSON.stringify(r)),this._internalEmitter.emit(to.ERROR_ENCOUNTERED,t)}},u.Commands=te,u.Events=fe,u.CompoundEvents=((Di={})[fe.NOTICE]=wi,Di[fe.PRIVATE_MESSAGE]=Ri,Di[fe.USER_NOTICE]=Pi,Di),u}(f),Bi=l((function(t,e){var r="undefined"!=typeof self?self:u,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function d(t){var e=new FileReader,r=h(e);return e.readAsArrayBuffer(t),r}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&o&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var t,e,r,n=y(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=h(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=c(t),e=l(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},p.prototype.delete=function(t){delete this.map[c(t)]},p.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},p.prototype.set=function(t,e){this.map[c(t)]=l(e)},p.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),f(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),f(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),f(t)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){var r,n,o=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),E.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function O(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function S(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},_.call(m.prototype),_.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];S.redirect=function(t,e){if(-1===g.indexOf(e))throw new RangeError("Invalid status code");return new S(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function b(t,r){return new Promise((function(n,i){var a=new m(t,r);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new S(o,r))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}b.polyfill=!0,t.fetch||(t.fetch=b,t.Headers=p,t.Request=m,t.Response=S),e.Headers=p,e.Request=m,e.Response=S,e.fetch=b,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e})),ki=c(Bi),Gi=(Bi.fetch,Bi.Headers,Bi.Request,Bi.Response,u.Symbol),Hi=function(){return"function"==typeof Gi&&("function"==typeof Symbol&&("symbol"==typeof Gi("foo")&&("symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}())))},Wi="Function.prototype.bind called on incompatible ",zi=Array.prototype.slice,Vi=Object.prototype.toString,qi="[object Function]",Yi=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||Vi.call(e)!==qi)throw new TypeError(Wi+e);for(var r,n=zi.call(arguments,1),o=function(){if(this instanceof r){var o=e.apply(this,n.concat(zi.call(arguments)));return Object(o)===o?o:this}return e.apply(t,n.concat(zi.call(arguments)))},i=Math.max(0,e.length-n.length),a=[],s=0;s<i;s++)a.push("$"+s);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},Ji=Yi.call(Function.call,Object.prototype.hasOwnProperty),$i=SyntaxError,Ki=Function,Zi=TypeError,Qi=function(t){try{return Ki('"use strict"; return ('+t+").constructor;")()}catch(t){}},Xi=Object.getOwnPropertyDescriptor;if(Xi)try{Xi({},"")}catch(t){Xi=null}var ta,ea=function(){throw new Zi},ra=Xi?function(){try{return ea}catch(t){try{return Xi(arguments,"callee").get}catch(t){return ea}}}():ea,na=Hi(),oa=Object.getPrototypeOf||function(t){return t.__proto__},ia={},aa="undefined"==typeof Uint8Array?Li:oa(Uint8Array),sa={"%AggregateError%":"undefined"==typeof AggregateError?Li:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?Li:ArrayBuffer,"%ArrayIteratorPrototype%":na?oa([][Symbol.iterator]()):Li,"%AsyncFromSyncIteratorPrototype%":Li,"%AsyncFunction%":ia,"%AsyncGenerator%":ia,"%AsyncGeneratorFunction%":ia,"%AsyncIteratorPrototype%":ia,"%Atomics%":"undefined"==typeof Atomics?Li:Atomics,"%BigInt%":"undefined"==typeof BigInt?Li:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?Li:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?Li:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?Li:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?Li:FinalizationRegistry,"%Function%":Ki,"%GeneratorFunction%":ia,"%Int8Array%":"undefined"==typeof Int8Array?Li:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?Li:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?Li:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":na?oa(oa([][Symbol.iterator]())):Li,"%JSON%":"object"==typeof JSON?JSON:Li,"%Map%":"undefined"==typeof Map?Li:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&na?oa((new Map)[Symbol.iterator]()):Li,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?Li:Promise,"%Proxy%":"undefined"==typeof Proxy?Li:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?Li:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?Li:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&na?oa((new Set)[Symbol.iterator]()):Li,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Li:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":na?oa(""[Symbol.iterator]()):Li,"%Symbol%":na?Symbol:Li,"%SyntaxError%":$i,"%ThrowTypeError%":ra,"%TypedArray%":aa,"%TypeError%":Zi,"%Uint8Array%":"undefined"==typeof Uint8Array?Li:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Li:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?Li:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?Li:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?Li:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?Li:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?Li:WeakSet},ua=function t(e){var r;if("%AsyncFunction%"===e)r=Qi("async function () {}");else if("%GeneratorFunction%"===e)r=Qi("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=Qi("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=oa(o.prototype))}return sa[e]=r,r},ca={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},la=Yi.call(Function.call,Array.prototype.concat),fa=Yi.call(Function.apply,Array.prototype.splice),pa=Yi.call(Function.call,String.prototype.replace),ya=Yi.call(Function.call,String.prototype.slice),ha=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,da=/\\(\\)?/g,va=function(t){var e=ya(t,0,1),r=ya(t,-1);if("%"===e&&"%"!==r)throw new $i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new $i("invalid intrinsic syntax, expected opening `%`");var n=[];return pa(t,ha,(function(t,e,r,o){n[n.length]=r?pa(o,da,"$1"):e||t})),n},_a=function(t,e){var r,n=t;if(Ji(ca,n)&&(n="%"+(r=ca[n])[0]+"%"),Ji(sa,n)){var o=sa[n];if(o===ia&&(o=ua(n)),void 0===o&&!e)throw new Zi("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new $i("intrinsic "+t+" does not exist!")},Ea=function(t,e){if("string"!=typeof t||0===t.length)throw new Zi("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Zi('"allowMissing" argument must be a boolean');var r=va(t),n=r.length>0?r[0]:"",o=_a("%"+n+"%",e),i=o.name,a=o.value,s=!1,u=o.alias;u&&(n=u[0],fa(r,la([0,1],u)));for(var c=1,l=!0;c<r.length;c+=1){var f=r[c],p=ya(f,0,1),y=ya(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===y||"'"===y||"`"===y)&&p!==y)throw new $i("property names with quotes must have matching quotes");if("constructor"!==f&&l||(s=!0),Ji(sa,i="%"+(n+="."+f)+"%"))a=sa[i];else if(null!=a){if(!(f in a)){if(!e)throw new Zi("base intrinsic for "+t+" exists, but the property is not available.");return}if(Xi&&c+1>=r.length){var h=Xi(a,f);a=(l=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:a[f]}else l=Ji(a,f),a=a[f];l&&!s&&(sa[i]=a)}}return a},ma=SyntaxError,Oa=Function,Sa=TypeError,ga=function(t){try{return Function('"use strict"; return ('+t+").constructor;")()}catch(t){}},ba=Object.getOwnPropertyDescriptor;if(ba)try{ba({},"")}catch(t){ba=null}var Aa,Ta=function(){throw new Sa},Ia=ba?function(){try{return Ta}catch(t){try{return ba(arguments,"callee").get}catch(t){return Ta}}}():Ta,Ca=Hi(),Na=Object.getPrototypeOf||function(t){return t.__proto__},wa=ga("async function* () {}"),Ra=wa?wa.prototype:ta,Pa=Ra?Ra.prototype:ta,Da="undefined"==typeof Uint8Array?ta:Na(Uint8Array),Ua={"%AggregateError%":"undefined"==typeof AggregateError?ta:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?ta:ArrayBuffer,"%ArrayIteratorPrototype%":Ca?Na([][Symbol.iterator]()):ta,"%AsyncFromSyncIteratorPrototype%":ta,"%AsyncFunction%":ga("async function () {}"),"%AsyncGenerator%":Ra,"%AsyncGeneratorFunction%":wa,"%AsyncIteratorPrototype%":Pa?Na(Pa):ta,"%Atomics%":"undefined"==typeof Atomics?ta:Atomics,"%BigInt%":"undefined"==typeof BigInt?ta:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?ta:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?ta:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?ta:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?ta:FinalizationRegistry,"%Function%":Oa,"%GeneratorFunction%":ga("function* () {}"),"%Int8Array%":"undefined"==typeof Int8Array?ta:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?ta:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?ta:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ca?Na(Na([][Symbol.iterator]())):ta,"%JSON%":"object"==typeof JSON?JSON:ta,"%Map%":"undefined"==typeof Map?ta:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Ca?Na((new Map)[Symbol.iterator]()):ta,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?ta:Promise,"%Proxy%":"undefined"==typeof Proxy?ta:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?ta:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?ta:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Ca?Na((new Set)[Symbol.iterator]()):ta,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?ta:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ca?Na(""[Symbol.iterator]()):ta,"%Symbol%":Ca?Symbol:ta,"%SyntaxError%":ma,"%ThrowTypeError%":Ia,"%TypedArray%":Da,"%TypeError%":Sa,"%Uint8Array%":"undefined"==typeof Uint8Array?ta:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?ta:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?ta:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?ta:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?ta:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?ta:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?ta:WeakSet},ja={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ma=Yi.call(Function.call,Array.prototype.concat),Fa=Yi.call(Function.apply,Array.prototype.splice),La=Yi.call(Function.call,String.prototype.replace),xa=Yi.call(Function.call,String.prototype.slice),Ba=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ka=/\\(\\)?/g,Ga=function(t){var e=xa(t,0,1),r=xa(t,-1);if("%"===e&&"%"!==r)throw new ma("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new ma("invalid intrinsic syntax, expected opening `%`");var n=[];return La(t,Ba,(function(t,e,r,o){n[n.length]=r?La(o,ka,"$1"):e||t})),n},Ha=function(t,e){var r,n=t;if(Ji(ja,n)&&(n="%"+(r=ja[n])[0]+"%"),Ji(Ua,n)){var o=Ua[n];if(void 0===o&&!e)throw new Sa("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new ma("intrinsic "+t+" does not exist!")},Wa=function(t,e){if("string"!=typeof t||0===t.length)throw new Sa("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Sa('"allowMissing" argument must be a boolean');var r=Ga(t),n=r.length>0?r[0]:"",o=Ha("%"+n+"%",e),i=o.name,a=o.value,s=!1,u=o.alias;u&&(n=u[0],Fa(r,Ma([0,1],u)));for(var c=1,l=!0;c<r.length;c+=1){var f=r[c],p=xa(f,0,1),y=xa(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===y||"'"===y||"`"===y)&&p!==y)throw new ma("property names with quotes must have matching quotes");if("constructor"!==f&&l||(s=!0),Ji(Ua,i="%"+(n+="."+f)+"%"))a=Ua[i];else if(null!=a){if(!(f in a)){if(!e)throw new Sa("base intrinsic for "+t+" exists, but the property is not available.");return}if(ba&&c+1>=r.length){var h=ba(a,f);a=(l=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:a[f]}else l=Ji(a,f),a=a[f];l&&!s&&(Ua[i]=a)}}return a},za=l((function(t){var e=Wa("%Function.prototype.apply%"),r=Wa("%Function.prototype.call%"),n=Wa("%Reflect.apply%",!0)||Yi.call(r,e),o=Wa("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch(t){o=null}t.exports=function(){return n(Yi,r,arguments)};var i=function(){return n(Yi,e,arguments)};o?o(t.exports,"apply",{value:i}):t.exports.apply=i})),Va=(za.apply,za(Wa("String.prototype.indexOf"))),qa=function(t,e){var r=Wa(t,!!e);return"function"==typeof r&&Va(t,".prototype.")>-1?za(r):r},Ya=(Aa=Object.freeze({__proto__:null,default:{}}))&&Aa.default||Aa,Ja="function"==typeof Map&&Map.prototype,$a=Object.getOwnPropertyDescriptor&&Ja?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ka=Ja&&$a&&"function"==typeof $a.get?$a.get:null,Za=Ja&&Map.prototype.forEach,Qa="function"==typeof Set&&Set.prototype,Xa=Object.getOwnPropertyDescriptor&&Qa?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ts=Qa&&Xa&&"function"==typeof Xa.get?Xa.get:null,es=Qa&&Set.prototype.forEach,rs="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,ns="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,os="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,is=Boolean.prototype.valueOf,as=Object.prototype.toString,ss=Function.prototype.toString,us=String.prototype.match,cs=String.prototype.slice,ls=String.prototype.replace,fs=String.prototype.toUpperCase,ps=String.prototype.toLowerCase,ys=RegExp.prototype.test,hs=Array.prototype.concat,ds=Array.prototype.join,vs=Array.prototype.slice,_s=Math.floor,Es="function"==typeof BigInt?BigInt.prototype.valueOf:null,ms=Object.getOwnPropertySymbols,Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Ss="function"==typeof Symbol&&"object"==typeof Symbol.iterator,gs="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ss||"symbol")?Symbol.toStringTag:null,bs=Object.prototype.propertyIsEnumerable,As=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Ts(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||ys.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-_s(-t):_s(t);if(n!==t){var o=String(n),i=cs.call(e,o.length+1);return ls.call(o,r,"$&_")+"."+ls.call(ls.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ls.call(e,r,"$&_")}var Is=Ya.custom,Cs=Is&&Ds(Is)?Is:null,Ns=function t(e,r,n,o){var i=r||{};if(js(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(js(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!js(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(js(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(js(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Ls(e,i);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var u=String(e);return s?Ts(e,u):u}if("bigint"==typeof e){var c=String(e)+"n";return s?Ts(e,c):c}var l=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=l&&l>0&&"object"==typeof e)return Ps(e)?"[Array]":"[Object]";var f=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=ds.call(Array(t.indent+1)," ")}return{base:r,prev:ds.call(Array(e+1),r)}}(i,n);if(void 0===o)o=[];else if(Fs(o,e)>=0)return"[Circular]";function p(e,r,a){if(r&&(o=vs.call(o)).push(r),a){var s={depth:i.depth};return js(i,"quoteStyle")&&(s.quoteStyle=i.quoteStyle),t(e,s,n+1,o)}return t(e,i,n+1,o)}if("function"==typeof e){var y=function(t){if(t.name)return t.name;var e=us.call(ss.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),h=Ws(e,p);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(h.length>0?" { "+ds.call(h,", ")+" }":"")}if(Ds(e)){var d=Ss?ls.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Os.call(e);return"object"!=typeof e||Ss?d:Bs(d)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var v="<"+ps.call(String(e.nodeName)),_=e.attributes||[],E=0;E<_.length;E++)v+=" "+_[E].name+"="+ws(Rs(_[E].value),"double",i);return v+=">",e.childNodes&&e.childNodes.length&&(v+="..."),v+="</"+ps.call(String(e.nodeName))+">"}if(Ps(e)){if(0===e.length)return"[]";var m=Ws(e,p);return f&&!function(t){for(var e=0;e<t.length;e++)if(Fs(t[e],"\n")>=0)return!1;return!0}(m)?"["+Hs(m,f)+"]":"[ "+ds.call(m,", ")+" ]"}if(function(t){return!("[object Error]"!==Ms(t)||gs&&"object"==typeof t&&gs in t)}(e)){var O=Ws(e,p);return"cause"in e&&!bs.call(e,"cause")?"{ ["+String(e)+"] "+ds.call(hs.call("[cause]: "+p(e.cause),O),", ")+" }":0===O.length?"["+String(e)+"]":"{ ["+String(e)+"] "+ds.call(O,", ")+" }"}if("object"==typeof e&&a){if(Cs&&"function"==typeof e[Cs])return e[Cs]();if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!Ka||!t||"object"!=typeof t)return!1;try{Ka.call(t);try{ts.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var S=[];return Za.call(e,(function(t,r){S.push(p(r,e,!0)+" => "+p(t,e))})),Gs("Map",Ka.call(e),S,f)}if(function(t){if(!ts||!t||"object"!=typeof t)return!1;try{ts.call(t);try{Ka.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var g=[];return es.call(e,(function(t){g.push(p(t,e))})),Gs("Set",ts.call(e),g,f)}if(function(t){if(!rs||!t||"object"!=typeof t)return!1;try{rs.call(t,rs);try{ns.call(t,ns)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return ks("WeakMap");if(function(t){if(!ns||!t||"object"!=typeof t)return!1;try{ns.call(t,ns);try{rs.call(t,rs)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return ks("WeakSet");if(function(t){if(!os||!t||"object"!=typeof t)return!1;try{return os.call(t),!0}catch(t){}return!1}(e))return ks("WeakRef");if(function(t){return!("[object Number]"!==Ms(t)||gs&&"object"==typeof t&&gs in t)}(e))return Bs(p(Number(e)));if(function(t){if(!t||"object"!=typeof t||!Es)return!1;try{return Es.call(t),!0}catch(t){}return!1}(e))return Bs(p(Es.call(e)));if(function(t){return!("[object Boolean]"!==Ms(t)||gs&&"object"==typeof t&&gs in t)}(e))return Bs(is.call(e));if(function(t){return!("[object String]"!==Ms(t)||gs&&"object"==typeof t&&gs in t)}(e))return Bs(p(String(e)));if(!function(t){return!("[object Date]"!==Ms(t)||gs&&"object"==typeof t&&gs in t)}(e)&&!function(t){return!("[object RegExp]"!==Ms(t)||gs&&"object"==typeof t&&gs in t)}(e)){var b=Ws(e,p),A=As?As(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",I=!A&&gs&&Object(e)===e&&gs in e?cs.call(Ms(e),8,-1):T?"Object":"",C=(A||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(I||T?"["+ds.call(hs.call([],I||[],T||[]),": ")+"] ":"");return 0===b.length?C+"{}":f?C+"{"+Hs(b,f)+"}":C+"{ "+ds.call(b,", ")+" }"}return String(e)};function ws(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function Rs(t){return ls.call(String(t),/"/g,"&quot;")}function Ps(t){return!("[object Array]"!==Ms(t)||gs&&"object"==typeof t&&gs in t)}function Ds(t){if(Ss)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Os)return!1;try{return Os.call(t),!0}catch(t){}return!1}var Us=Object.prototype.hasOwnProperty||function(t){return t in this};function js(t,e){return Us.call(t,e)}function Ms(t){return as.call(t)}function Fs(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Ls(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Ls(cs.call(t,0,e.maxStringLength),e)+n}return ws(ls.call(ls.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,xs),"single",e)}function xs(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+fs.call(e.toString(16))}function Bs(t){return"Object("+t+")"}function ks(t){return t+" { ? }"}function Gs(t,e,r,n){return t+" ("+e+") {"+(n?Hs(r,n):ds.call(r,", "))+"}"}function Hs(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+ds.call(t,","+r)+"\n"+e.prev}function Ws(t,e){var r=Ps(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=js(t,o)?e(t[o],t):""}var i,a="function"==typeof ms?ms(t):[];if(Ss){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var u in t)js(t,u)&&(r&&String(Number(u))===u&&u<t.length||Ss&&i["$"+u]instanceof Symbol||(ys.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if("function"==typeof ms)for(var c=0;c<a.length;c++)bs.call(t,a[c])&&n.push("["+e(a[c])+"]: "+e(t[a[c]],t));return n}var zs=Ea("%TypeError%"),Vs=Ea("%WeakMap%",!0),qs=Ea("%Map%",!0),Ys=qa("WeakMap.prototype.get",!0),Js=qa("WeakMap.prototype.set",!0),$s=qa("WeakMap.prototype.has",!0),Ks=qa("Map.prototype.get",!0),Zs=qa("Map.prototype.set",!0),Qs=qa("Map.prototype.has",!0),Xs=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},tu=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new zs("Side channel does not contain "+Ns(t))},get:function(n){if(Vs&&n&&("object"==typeof n||"function"==typeof n)){if(t)return Ys(t,n)}else if(qs){if(e)return Ks(e,n)}else if(r)return function(t,e){var r=Xs(t,e);return r&&r.value}(r,n)},has:function(n){if(Vs&&n&&("object"==typeof n||"function"==typeof n)){if(t)return $s(t,n)}else if(qs){if(e)return Qs(e,n)}else if(r)return function(t,e){return!!Xs(t,e)}(r,n);return!1},set:function(n,o){Vs&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new Vs),Js(t,n,o)):qs?(e||(e=new qs),Zs(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=Xs(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n},eu=String.prototype.replace,ru=/%20/g,nu="RFC3986",ou={default:nu,formatters:{RFC1738:function(t){return eu.call(t,ru,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:nu},iu=Object.prototype.hasOwnProperty,au=Array.isArray,su=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),uu=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},cu={arrayToObject:uu,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],i=o.obj[o.prop],a=Object.keys(i),s=0;s<a.length;++s){var u=a[s],c=i[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(e.push({obj:i,prop:u}),r.push(c))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(au(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r,n,o){if(0===t.length)return t;var i=t;if("symbol"==typeof t?i=Symbol.prototype.toString.call(t):"string"!=typeof t&&(i=String(t)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var a="",s=0;s<i.length;++s){var u=i.charCodeAt(s);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===ou.RFC1738&&(40===u||41===u)?a+=i.charAt(s):u<128?a+=su[u]:u<2048?a+=su[192|u>>6]+su[128|63&u]:u<55296||u>=57344?a+=su[224|u>>12]+su[128|u>>6&63]+su[128|63&u]:(s+=1,u=65536+((1023&u)<<10|1023&i.charCodeAt(s)),a+=su[240|u>>18]+su[128|u>>12&63]+su[128|u>>6&63]+su[128|63&u])}return a},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(au(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(au(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!iu.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var o=e;return au(e)&&!au(r)&&(o=uu(e,n)),au(e)&&au(r)?(r.forEach((function(r,o){if(iu.call(e,o)){var i=e[o];i&&"object"==typeof i&&r&&"object"==typeof r?e[o]=t(i,r,n):e.push(r)}else e[o]=r})),e):Object.keys(r).reduce((function(e,o){var i=r[o];return iu.call(e,o)?e[o]=t(e[o],i,n):e[o]=i,e}),o)}},lu=Object.prototype.hasOwnProperty,fu={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},pu=Array.isArray,yu=String.prototype.split,hu=Array.prototype.push,du=function(t,e){hu.apply(t,pu(e)?e:[e])},vu=Date.prototype.toISOString,_u=ou.default,Eu={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:cu.encode,encodeValuesOnly:!1,format:_u,formatter:ou.formatters[_u],indices:!1,serializeDate:function(t){return vu.call(t)},skipNulls:!1,strictNullHandling:!1},mu={},Ou=function t(e,r,n,o,i,a,s,u,c,l,f,p,y,h,d){for(var v,_=e,E=d,m=0,O=!1;void 0!==(E=E.get(mu))&&!O;){var S=E.get(e);if(m+=1,void 0!==S){if(S===m)throw new RangeError("Cyclic object value");O=!0}void 0===E.get(mu)&&(m=0)}if("function"==typeof s?_=s(r,_):_ instanceof Date?_=l(_):"comma"===n&&pu(_)&&(_=cu.maybeMap(_,(function(t){return t instanceof Date?l(t):t}))),null===_){if(o)return a&&!y?a(r,Eu.encoder,h,"key",f):r;_=""}if("string"==typeof(v=_)||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||cu.isBuffer(_)){if(a){var g=y?r:a(r,Eu.encoder,h,"key",f);if("comma"===n&&y){for(var b=yu.call(String(_),","),A="",T=0;T<b.length;++T)A+=(0===T?"":",")+p(a(b[T],Eu.encoder,h,"value",f));return[p(g)+"="+A]}return[p(g)+"="+p(a(_,Eu.encoder,h,"value",f))]}return[p(r)+"="+p(String(_))]}var I,C=[];if(void 0===_)return C;if("comma"===n&&pu(_))I=[{value:_.length>0?_.join(",")||null:void 0}];else if(pu(s))I=s;else{var N=Object.keys(_);I=u?N.sort(u):N}for(var w=0;w<I.length;++w){var R=I[w],P="object"==typeof R&&void 0!==R.value?R.value:_[R];if(!i||null!==P){var D=pu(_)?"function"==typeof n?n(r,R):r:r+(c?"."+R:"["+R+"]");d.set(e,m);var U=tu();U.set(mu,d),du(C,t(P,D,n,o,i,a,s,u,c,l,f,p,y,h,U))}}return C},Su=(Object.prototype.hasOwnProperty,Array.isArray,function(t,e){var r,n=t,o=function(t){if(!t)return Eu;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||Eu.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=ou.default;if(void 0!==t.format){if(!lu.call(ou.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=ou.formatters[r],o=Eu.filter;return("function"==typeof t.filter||pu(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:Eu.addQueryPrefix,allowDots:void 0===t.allowDots?Eu.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:Eu.charsetSentinel,delimiter:void 0===t.delimiter?Eu.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:Eu.encode,encoder:"function"==typeof t.encoder?t.encoder:Eu.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:Eu.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:Eu.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:Eu.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:Eu.strictNullHandling}}(e);"function"==typeof o.filter?n=(0,o.filter)("",n):pu(o.filter)&&(r=o.filter);var i,a=[];if("object"!=typeof n||null===n)return"";i=e&&e.arrayFormat in fu?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var s=fu[i];r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);for(var u=tu(),c=0;c<r.length;++c){var l=r[c];o.skipNulls&&null===n[l]||du(a,Ou(n[l],l,s,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,u))}var f=a.join(o.delimiter),p=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""}),gu=Su,bu=function(t){function r(e,r){var n=t.call(this,e)||this;return n.body=r,Object.defineProperty(n,"name",{value:"TwitchJSFetchError"}),n}return e(r,t),r}(ji),Au=function(t,e,a){return o(void 0,void 0,void 0,(function(){var o,s,u,c,l,f,p,y,h,d;return i(this,(function(i){switch(i.label){case 0:return s=(o=e||{}).search,u=o.body,c=n(o,["search","body"]),l=s?gu(s,r(r({},a),{addQueryPrefix:!0,arrayFormat:"repeat"})):"",f=Tu(u),p=r(r(r({},c),f),{headers:r(r({},null==e?void 0:e.headers),f.headers)}),[4,ki(""+t+l,p)];case 1:return[4,(y=i.sent()).json().catch((function(){return{}}))];case 2:if(h=i.sent(),"error"in(d=or(h,{deep:!0})))throw new bu(d.message,d);if(!y.ok)throw new bu(y.statusText,{error:!0,status:y.status,message:y.statusText});return[2,d]}}))}))},Tu=function(t){try{return t?"[object FormData]"===toString.call(t)?{body:t}:{body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}:{}}catch(e){return{body:t}}};var Iu,Cu=function(t){return void 0===t},Nu=function(t){var e={token:wn,clientId:wn,onAuthenticationFailure:function(t){return H(t)||Cu(t)}};return t=Nn(t,{clientId:void 0,onAuthenticationFailure:void 0}),tn(cn(t,e),"Expected valid options"),t};!function(t){t[t.NOT_READY=0]="NOT_READY",t[t.READY=1]="READY",t[t.INITIALIZED=2]="INITIALIZED"}(Iu||(Iu={}));var wu=function(){function t(t){this._readyState=Iu.READY,this._options=Nu(t),this._log=Re(r({name:"Api"},this._options.log))}return Object.defineProperty(t.prototype,"readyState",{get:function(){return this._readyState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),t.prototype.updateOptions=function(t){this._options=Nu(r(r({},this._options),t))},t.prototype.initialize=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return t&&(this._options=Nu(r(r({},this._options),t))),t||2!==this.readyState?[4,Au("https://id.twitch.tv/oauth2/validate",{headers:{Authorization:"Bearer "+this._options.token}})]:[2,Promise.resolve()];case 1:return e=n.sent(),this._readyState=Iu.INITIALIZED,this._status=e,[2]}}))}))},t.prototype.hasScope=function(t){var e=this;return new Promise((function(r,n){var o,i;return(null===(i=null===(o=e.status)||void 0===o?void 0:o.scopes)||void 0===i?void 0:i.includes(t))?r(!0):n(!1)}))},t.prototype.get=function(t,e){return void 0===t&&(t=""),this._handleFetch(t,e)},t.prototype.post=function(t,e){return this._handleFetch(t,r(r({},e),{method:"post"}))},t.prototype.put=function(t,e){return this._handleFetch(t,r(r({},e),{method:"put"}))},t.prototype._getAuthenticationHeaders=function(){var t=this._options,e=t.clientId;return{Authorization:"Bearer "+t.token,"Client-Id":e}},t.prototype._handleFetch=function(t,e){return void 0===t&&(t=""),void 0===e&&(e={}),o(this,void 0,void 0,(function(){var n,a,s,u,c,l,f,p=this;return i(this,(function(y){switch(y.label){case 0:"https://api.twitch.tv/helix",n="https://api.twitch.tv/helix/"+t,a=(no(e.method)||"GET")+" "+n,s=this._log.profile(),u=function(){return o(p,void 0,void 0,(function(){var t,o,a;return i(this,(function(i){switch(i.label){case 0:t=this._getAuthenticationHeaders(),o=r(r({},e),{headers:r(r({},e.headers),t)}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Au(n,o)];case 2:return[2,i.sent()];case 3:if((a=i.sent())instanceof bu&&401===a.body.status)throw new Mi(a.message,a.body);throw a;case 4:return[2]}}))}))},y.label=1;case 1:return y.trys.push([1,3,7,8]),[4,u()];case 2:return[2,y.sent()];case 3:return l=y.sent(),"function"==typeof this._options.onAuthenticationFailure&&l instanceof Mi?[4,this._handleAuthenticationFailure(l)]:[3,6];case 4:return(f=y.sent())?(this._log.info(a+" ... retrying with new token"),this.updateOptions({token:f}),[4,u()]):[3,6];case 5:return[2,y.sent()];case 6:throw c=l;case 7:return s.done(a,c),[7];case 8:return[2]}}))}))},t.prototype._handleAuthenticationFailure=function(t){var e,r;return o(this,void 0,void 0,(function(){var n;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,null===(r=(e=this._options).onAuthenticationFailure)||void 0===r?void 0:r.call(e)];case 1:return[2,o.sent()];case 2:throw n=o.sent(),this._log.error(n,"onAuthenticationFailure error occurred"),t;case 3:return[2]}}))}))},t}(),Ru=function(){function t(t){var e=t.token,n=t.username,o=t.clientId,i=t.log,a=t.onAuthenticationFailure,s=t.chat,u=t.api;this.chat=new xi(r(r({log:i},s),{token:e,username:n,onAuthenticationFailure:a})),this.api=new wu(r(r({log:i},u),{token:e,clientId:o,onAuthenticationFailure:a}))}return t.prototype.updateOptions=function(t){var e=t.chat,r=t.api;e&&this.chat.updateOptions(e),r&&this.api.updateOptions(r)},t.Chat=xi,t.Api=wu,t}();return Ru}();
//# sourceMappingURL=twitch.js.map
